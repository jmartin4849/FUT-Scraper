document.addEventListener("DOMContentLoaded",function(event){});window.pricesLoaded=false;jQuery(document).ready(function(){var runChemStyle=true;eleChemStyleStatus=$("#run-chem-style").data("run");if(eleChemStyleStatus==0)runChemStyle=false;function justAtestPlayer(){testVar=11}function markMyPlatform(){platform=getCookie("platform");mmp=localStorage.getItem("player_mmp");if(mmp===null||mmp=="undefined")return;if(mmp==1){$(".mmpBtn").addClass("marked");if(platform=="ps4"){$(".box_price_ps").css("opacity","1");$(".box_price_xbox").css("opacity","0.1");$(".box_price_pc").css("opacity","0.1")}if(platform=="xone"){$(".box_price_ps").css("opacity","0.1");$(".box_price_xbox").css("opacity","1");$(".box_price_pc").css("opacity","0.1")}if(platform=="pc"){$(".box_price_ps").css("opacity","0.1");$(".box_price_xbox").css("opacity","0.1");$(".box_price_pc").css("opacity","1")}}}function markMyPlatformUI(platform,action){if(action==1){if(platform=="ps4"){$(".box_price_ps").css("opacity","1");$(".box_price_xbox").css("opacity","0.1");$(".box_price_pc").css("opacity","0.1")}if(platform=="xone"){$(".box_price_ps").css("opacity","0.1");$(".box_price_xbox").css("opacity","1");$(".box_price_pc").css("opacity","0.1")}if(platform=="pc"){$(".box_price_ps").css("opacity","0.1");$(".box_price_xbox").css("opacity","0.1");$(".box_price_pc").css("opacity","1")}}else{$(".box_price").css("opacity","1")}}$(".mmpBtn").click(function(){cookiePlatform=getCookie("platform");if($(this).hasClass("marked")){localStorage.setItem("player_mmp",0);$(this).removeClass("marked");action=0}else{localStorage.setItem("player_mmp",1);$(this).addClass("marked");action=1}markMyPlatformUI(cookiePlatform,action)});$(".obj-full-screen").click(function(){objSectionEle=$("#obj-section");if(objSectionEle.hasClass("objFullScreen")){objSectionEle.removeClass("objFullScreen");$(".obj-full-screen i ").toggleClass("fa-expand-arrows fa-times")}else{objSectionEle.addClass("objFullScreen",{duration:300});$(".obj-full-screen i ").toggleClass("fa-expand-arrows fa-times")}});$playerSetInfo=$("#player-set-info").html();pricingType=parseInt($("#player-set-info").data("htv"));setId=$("#player-set-info").data("set-id");var cardIdClicked;var pos=jQuery("#Player-card").children(".pcdisplay-pos").text();var isGK=pos==="GK"?true:false;$(".igs-search").on("keyup",function(){var query=$(this).val().toLowerCase();if(query.length===0){$(".ig-stat-name-tooltip").css({"font-weight":"normal",color:"inherit"});$(".stat_val").css({"font-weight":"normal",color:"inherit"})}else{$(".ig-stat-name-tooltip").each(function(i,obj){name=$(this).text().toLowerCase();if(name.indexOf(query)!==-1){$(this).css({"font-weight":"bold",color:"#fa475c"})}else{$(this).css({"font-weight":"normal",color:"inherit"})}});$(".stat_val").each(function(i,obj){name=$(this).text().toLowerCase();if(name.indexOf(query)!==-1){$(this).css({"font-weight":"bold",color:"#fa475c"})}else{$(this).css({"font-weight":"normal",color:"inherit"})}})}});$(".match-date").each(function(i,obj){var m_date=$(this).attr("data-date");if(m_date!="Z"){local_date=moment(m_date).format("DD-MM HH:mm");$(this).html(local_date)}});var CDN=$("#web-info").data("image-url");var mobileDetect=$("#page-info").data("mobile");jQuery("#player-squad-chem-sub-block").fadeIn(300);if(mobileDetect===0){scrollPlayer()}var pageEle=jQuery("#page-info");window.year=pageEle.data("year");window.fYear=pageEle.data("f-year");window.playerId=pageEle.data("id");window.playerResource=pageEle.data("player-resource");window.chemUrlIsActive=parseInt(pageEle.data("chem-url-active"));window.chemStyleUrlName=pageEle.data("chem-url-name");window.pRevision=$("#Player-card").data("revision");window.pLevel=$("#Player-card").data("level");window.chemTextColor=namecheck(window.pRevision+" "+window.pLevel,window.year);window.cardRareType=$("#Player-card").data("rare-type");var player_id=parseInt($("#page-data").attr("data-player-id"));var boostLive=parseInt($("#page-info").data("boost-live"));if(typeof boostLive=="undefined"){boostLive=0}var greenG="#326211";var lgreenG="#7da336";var yellowG="#e8b415";var orangeG="#c8790a";var redG="#bd2f2f";var dflt={titleFontFamily:"Poppins",titleMinFontSize:12,gaugeWidthScale:.6,donut:false,valueFontFamily:"Poppins",counter:false,formatNumber:false};var gg1=new JustGage({id:"phy_gauge",value:607,min:100,max:800,title:jQuery("#phy-h-name").text(),customSectors:[{color:redG,lo:0,hi:301},{color:orangeG,lo:301,hi:501},{color:yellowG,lo:501,hi:601},{color:lgreenG,lo:601,hi:701},{color:greenG,lo:701,hi:800}],defaults:dflt});var gg2=new JustGage({id:"men_gauge",value:607,min:50,max:500,title:jQuery("#men-h-name").text(),customSectors:[{color:redG,lo:0,hi:101},{color:orangeG,lo:101,hi:201},{color:yellowG,lo:201,hi:301},{color:lgreenG,lo:301,hi:401},{color:greenG,lo:401,hi:500}],defaults:dflt});var gg3=new JustGage({id:"ski_gauge",value:607,min:400,max:1500,title:jQuery("#skill-h-name").text(),customSectors:[{color:redG,lo:0,hi:601},{color:orangeG,lo:601,hi:801},{color:yellowG,lo:801,hi:1001},{color:lgreenG,lo:1001,hi:1201},{color:greenG,lo:1201,hi:1500}],defaults:dflt});var gg4=new JustGage({id:"total_bs_gauge",value:607,min:100,max:600,title:jQuery("#bs-h-name").text(),customSectors:[{color:redG,lo:0,hi:201},{color:orangeG,lo:201,hi:301},{color:yellowG,lo:301,hi:401},{color:lgreenG,lo:401,hi:501},{color:greenG,lo:501,hi:600}],defaults:dflt});var gg5=new JustGage({id:"total_igs_gauge",value:607,min:200,max:2800,title:jQuery("#igs-h-name").text(),customSectors:[{color:redG,lo:0,hi:1001},{color:orangeG,lo:1001,hi:1401},{color:yellowG,lo:1401,hi:1801},{color:lgreenG,lo:1801,hi:2401},{color:greenG,lo:2401,hi:2800}],defaults:dflt});jQuery("#chem-style-review-select").select2({placeholder:"Chemistry Style",width:"resolve"});jQuery("#position-review-select").select2({placeholder:"POS",width:"resolve"});jQuery("#formation-review-select").select2({placeholder:"Formation",width:"resolve"});jQuery("#mode-used-review-select").select2({placeholder:"Mode used in...",width:"resolve"});$(".base-stat-slider").on("input",function(){var userValue=$(this).val();$(this).parent().find(".range-value").html(userValue)});$(".rateYo").rateYo({multiColor:{startColor:"#b71c1c",endColor:"#f9a825"},rating:1,halfStar:true});$("#submit-review").click(function(){getReviewFormData()});function getReviewFormData(){var logged=$("#site-user-info").data("logged");var data={};data["csrf_name"]=jQuery("meta[name=general_csrf-name]").attr("content");data["csrf_value"]=jQuery("meta[name=general_csrf-value]").attr("content");data["player_id"]=player_id;data["title"]=$("#review-form-title").val();data["squad_url"]=$("#review-form-squad-url").val();if(data["title"].length===0){swalError("Please fill the title input.");throw new Error("Empty title!")}data["stars"]={};data["stars"]["overallStar"]=$("#review-overall-ratting").rateYo("rating");data["stars"]["vfmStar"]=$("#review-vfm").rateYo("rating");data["stars"]["gcStar"]=$("#review-gc").rateYo("rating");data["stars"]["staminaStar"]=$("#review-stamina").rateYo("rating");var chemStyleUsed=$("#chem-style-review-select").val();if(chemStyleUsed.length==0){data["chemStyleUsed"]="Basic"}else{data["chemStyleUsed"]=chemStyleUsed}data["formationUsed"]=$("#formation-review-select").val();if(data["formationUsed"].length===0){swalError("Please choose a formation.");return}data["positionUsed"]=$("#position-review-select").val();if(data["positionUsed"].length===0){swalError("Please choose a position.");return}data["gamesPlayed"]=$("#review-form-games").val();if(data["gamesPlayed"].length===0){swalError("Please fill the game input.");return}data["goalsScored"]=$("#review-form-goals").val();if(data["goalsScored"].length===0){swalError("Please fill the goals input.");return}data["assistsMade"]=$("#review-form-assists").val();if(data["assistsMade"].length===0){swalError("Please fill the assists input.");return}if(!$.isNumeric(data["gamesPlayed"])||!$.isNumeric(data["goalsScored"])||!$.isNumeric(data["assistsMade"])){swalError("Games, goals and assists can only be numbers.");return}data["baseStats"]={};$(".range-value").each(function(i,obj){var type=$(this).data("type");data["baseStats"][type]=parseInt($(this).text())});data["reviewText"]=document.querySelector("#editor-review > div.ql-editor").innerHTML;if(data["reviewText"].length===0){swalError("Please fill the review area.");return}data["prosText"]=document.querySelector("#editor-pros > div.ql-editor").innerHTML;data["consText"]=document.querySelector("#editor-cons > div.ql-editor").innerHTML;data["most_used_gamemode"]=$("#mode-used-review-select").val();if(data["most_used_gamemode"].length===0){swalError("Please choose a the most used mode.");return}data["youtube_url"]=$("#review-form-yt-url").val();data["image_verf_url"]=$("#review-form-img-verf").val();data["stars"]=JSON.stringify(data["stars"]);data["baseStats"]=JSON.stringify(data["baseStats"]);if(logged!="logged_in"){swalError("You have to login in order to submit a review.")}else{$("#submit-review").hide();$("#submit-review-loader-btn").show();$.ajax({type:"POST",url:"/user/"+window.year+"/submitReview",cache:false,data:data,statusCode:{401:function(data){swalError("You have to login in order to submit a review.")},500:function(data){swalError("Something went wrong.")}},success:function(data){if(data.error=="success"){swalSuccess("Your player review has been submitted and been sent to the approval process.");$("#submit-review-loader-btn").hide();return}if(data.error=="review_limit"){swalError("Reviews per day limit reached.");$("#submit-review").show();$("#submit-review-loader-btn").hide();return}if(data.error=="already_reviewed"){swalError("You already reviewed this player.");$("#submit-review-loader-btn").hide();return}return},error:function(data){$("#submit-review").show();$("#submit-review-loader-btn").hide()}})}}var starWidth=$(".rateYo").rateYo("option","starWidth");$(".rateYo").rateYo("option","starWidth","25px");var toolbarOptions=[["bold","italic","underline","strike"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{size:["small",false,"large","huge"]}],[{header:[1,2,3,4,5,6,false]}],[{color:[]},{background:[]}],[{font:[]}]];if(window.year==22){function setReviewDataOnLocalStorage(type){data={};data["title"]=$("#review-form-title").val();data["reviewText"]=document.querySelector("#editor-review > div.ql-editor").innerHTML;data["prosText"]=document.querySelector("#editor-pros > div.ql-editor").innerHTML;data["consText"]=document.querySelector("#editor-cons > div.ql-editor").innerHTML;localStorage.setItem("review-"+player_id+"-"+window.year,JSON.stringify(data))}function getReviewDataFromLocalStorage(){var reviewData=JSON.parse(localStorage.getItem("review-"+player_id+"-"+window.year));if(typeof reviewData==="undefiend"||reviewData==null){reviewData={}}if(reviewData.hasOwnProperty("title")){$("#review-form-title").val(reviewData["title"])}if(reviewData.hasOwnProperty("reviewText")){$("#editor-review > div.ql-editor").html(reviewData["reviewText"])}if(reviewData.hasOwnProperty("prosText")){$("#editor-pros > div.ql-editor").html(reviewData["prosText"])}if(reviewData.hasOwnProperty("consText")){$("#editor-cons > div.ql-editor").html(reviewData["consText"])}}var editorReview=new Quill("#editor-review",{modules:{toolbar:toolbarOptions,history:{delay:500,userOnly:true}},theme:"snow",placeholder:"Review goes in here..."});editorReview.on("editor-change",function(eventName){var limit=9e3;if(editorReview.getLength()>limit){editorReview.deleteText(limit,editorReview.getLength())}setReviewDataOnLocalStorage("text")});var editorPros=new Quill("#editor-pros",{modules:{toolbar:toolbarOptions,history:{delay:500,userOnly:true}},theme:"snow",placeholder:"Pros goes in here..."});editorPros.on("editor-change",function(eventName){var limit=3e3;if(editorPros.getLength()>limit){editorPros.deleteText(limit,editorPros.getLength())}setReviewDataOnLocalStorage("pros")});var editorCons=new Quill("#editor-cons",{modules:{toolbar:toolbarOptions,history:{delay:500,userOnly:true}},theme:"snow",placeholder:"Cons goes in here..."});editorCons.on("editor-change",function(eventName){var limit=3e3;if(editorCons.getLength()>limit){editorCons.deleteText(limit,editorCons.getLength())}setReviewDataOnLocalStorage("pros")});jQuery("#review-form-title").on("change",function(){setReviewDataOnLocalStorage("title")});getReviewDataFromLocalStorage()}var domainAndProtocol=jQuery("#domAndProtocol").attr("data-domain");var year=window.year;var bigCoinsImg=' <img alt="c" class="coins_icon_l_bin" src="'+window.cdn_url+'/design/img/coins_bin.png">';var smallCoinsImg=' <img alt="c" class="coins_icon_sub_bin" src="'+window.cdn_url+'/design/img/coins_bin.png">';document.getElementById("copy_to_clip_player_share_link").addEventListener("click",function(){copyToClipboard(document.getElementById("share_player_link"))});$(".player_share_tooltip").tooltipster({theme:"tooltipster-shadow",delay:100,minWidth:300,interactive:true});jQuery(".pgp_s_val_ps").tooltipster({maxWidth:350,interactive:true});$(".tooltip_ster").tooltipster();jQuery(".pgp_s_val_xbox").tooltipster({maxWidth:350,interactive:true});jQuery(".pgp_s_val_pc").tooltipster({maxWidth:350,interactive:true});$(".ig-stat-name-tooltip").tooltipster({});window.originalData=[];window.originalData=[];window.originalData["rating"]=jQuery("#player-top .pcdisplay-rat").text();window.originalData["position"]=jQuery("#player-top  .pcdisplay-pos").text();window.originalData["pace"]=jQuery("#player-top  .pcdisplay-ovr1").text();window.originalData["shot"]=jQuery("#player-top  .pcdisplay-ovr2").text();window.originalData["pass"]=jQuery("#player-top  .pcdisplay-ovr3").text();window.originalData["dribbling"]=jQuery("#player-top  .pcdisplay-ovr4").text();window.originalData["defending"]=jQuery("#player-top  .pcdisplay-ovr5").text();window.originalData["heading"]=jQuery("#player-top  .pcdisplay-ovr6").text();window.originalData["squad_id"]=jQuery("#player-top  #p_squad_id").html();window.originalData["nation"]=jQuery("#player-top  #player_nation").attr("src");window.originalData["club"]=jQuery("#player-top  #player_club").attr("src");window.originalData["playerimg"]=jQuery("#player-top  #player_pic").attr("src");window.originalData["special_overlay"]=false;window.originalData["playerName"]=jQuery("#player-top  .pcdisplay-name").html();if(jQuery("#player-top  .pcdisplay-picture").hasClass("special-img")){window.originalData["special_overlay"]=true}if(window.fYear==1){var watchedPlayers=JSON.parse(localStorage.getItem("watched-players"));var playersMap=JSON.parse(localStorage.getItem("watched-players-map"));if(typeof watchedPlayers==="undefiend"||watchedPlayers==null){watchedPlayers=[];playersMap={};watchedPlayersCount=0}else{var watchedPlayersCount=watchedPlayers.length}var playerObj={};playerObj["name"]=jQuery("#Player-card").find(".pcdisplay-name").text();playerObj["url"]=window.location.href;playerObj["img"]=window.originalData["playerimg"];playerObj["club_img"]=window.originalData["club"];playerObj["nation_img"]=window.originalData["nation"];playerObj["id"]=window.playerId;playerObj["version"]=jQuery("#version0").data("version");playerObj["position"]=window.originalData["position"];playerObj["rating"]=jQuery("#Player-card").find(".pcdisplay-rat").text();if(playersMap.hasOwnProperty(window.playerId)){newWatchedPlayers=[];newPlayersMap={};var pIndex=playersMap[window.playerId];var i=0;jQuery.each(watchedPlayers,function(index,value){if(index!==pIndex){newWatchedPlayers.push(value);newPlayersMap[value.id]=i;i++}});watchedPlayers=newWatchedPlayers;playersMap=newPlayersMap;watchedPlayers.push(playerObj);playersMap[window.playerId]=watchedPlayers.length-1}else{if(watchedPlayersCount>9){newWatchedPlayers=[];newPlayersMap={};last_item=0;last_item_id=watchedPlayers[0]["id"];var i=0;jQuery.each(watchedPlayers,function(index,value){if(index!==last_item){newWatchedPlayers.push(value);newPlayersMap[value.id]=i;i++}});watchedPlayers=newWatchedPlayers;playersMap=newPlayersMap}watchedPlayers.push(playerObj);playersMap[window.playerId]=watchedPlayers.length-1}localStorage.setItem("watched-players",JSON.stringify(watchedPlayers));localStorage.setItem("watched-players-map",JSON.stringify(playersMap))}$(".change-platform").click(function(){location.reload()});$("#switch-stats-graph").click(function(){var mode=$(this).attr("data-status");switchSatsAndGraphBoxes(mode)});setCookie=function(name,value){jQuery.cookie(name,value,{expires:365,path:"/"})};function switchSatsAndGraphBoxes(mode){var pageModeCookie=getCookie("player_page_mode");$statsBox=$("#stats_box");$graphBox=$("#graph_box_content");if(mode=="up"){setCookie("player_page_mode","down");$("#switch-stats-graph").attr("data-status","down");$graphBox.removeClass("order-1 order-2");$graphBox.addClass("order-1");$statsBox.removeClass("order-1 order-2");$statsBox.addClass("order-2")}else{setCookie("player_page_mode","up");$("#switch-stats-graph").attr("data-status","up");$graphBox.removeClass("order-1 order-2");$graphBox.addClass("order-2");$statsBox.removeClass("order-1 order-2");$statsBox.addClass("order-1 ")}}$(".cr-tab").click(function(){$(".cr-tab").removeClass("active");$(this).addClass("active");var target=$(this).data("target");if(target==="comments"){$("#reviews-area-holder-desk").addClass("d-none");$("#comments-area-holder-desk").removeClass("d-none")}else{$("#comments-area-holder-desk").addClass("d-none");$("#reviews-area-holder-desk").removeClass("d-none")}});if(window.year>18){var commentsCookie=getCookie("comments");if(commentsCookie==="true"){var playerId=$(".player-ids").data("player-id");doAjaxRequestComments(1,playerId,"init")}}jQuery(".its").on("click",function(){$(".its").each(function(i,obj){var tmpContentId=jQuery(this).data("target");jQuery("#"+tmpContentId).hide();jQuery(this).removeClass("active")});jQuery(this).addClass("active");var contentId=jQuery(this).data("target");jQuery("#"+contentId).show()});function scrollPlayer(){var card_left="1px";$(window).scroll(function(){if($playerSetInfo.length>10&&window.SbcPrice||pricingType==0){$scrollEle=$(".player-set-logo")}else{$scrollEle=$("#ps-lowest-3")}if(setId.length===0){$scrollEle=$("#ps-lowest-2")}if($(window).scrollTop()>$scrollEle.offset().top){$(".card0").addClass("float_card").css("margin-left",card_left+"px").show();$(".player-info-area").css("margin-top","340px")}else{$(".card0").removeClass("float_card").show();$(".player-info-area").css("margin-top","0")}})}$(".vote").click(function(event){var that=parseInt($(this).attr("data-vote"));var player_id=parseInt($("#page-data").attr("data-player-id"));event.preventDefault();data={};data["csrf_name"]=jQuery("meta[name=general_csrf-name]").attr("content");data["csrf_value"]=jQuery("meta[name=general_csrf-value]").attr("content");data["votingType"]=that;data["id"]=player_id;data["year"]=window.year;$.ajax({type:"POST",url:"/user/"+window.year+"/playerVote",cache:false,data:data,statusCode:{401:function(data){swal({allowEscapeKey:true,allowOutsideClick:true,type:"error",title:"You have to login in order to vote.",text:"The window will be closed in...",timer:2e3,showConfirmButton:false})},500:function(data){swal({allowEscapeKey:true,allowOutsideClick:true,type:"error",title:"Something went wrong.",text:"The window will be closed in...",timer:2e3,showConfirmButton:false})}},success:function(data){switch(data.data){case true:if(that==1){var currentVotes=parseInt($("#votes_up").text());currentVotes++;$("#votes_up").text(currentVotes).slideUp().fadeIn()}else if(that==-1){var currentDownVotes=parseInt($("#votes_down").text());currentDownVotes++;$("#votes_down").text(currentDownVotes).slideUp().fadeIn()}break;case"alreadyVoted":swal({allowEscapeKey:true,allowOutsideClick:true,type:"error",title:"You already voted :(",text:"The window will be closed in...",timer:2e3,showConfirmButton:false});break}}})});var psPriceEle=jQuery("#ps-lowest-1");var xboxPriceEle=jQuery("#xbox-lowest-1");var pcPriceEle=jQuery("#pc-lowest-1");var rareTpesArr=["newimotm","award-winner","if","purple","toty","bluered","otw","stpatrick","motm","pink","tots","oldimotm","imotm","futties-winners","storymode","fut-champ","confmotm","halloween","movember","sbc","sbc_premium","promo","white-blue-mls","marquee","motm_eu","rtr_contender","rtr_selected","rtr_worldcup","united","futmas","fut-bd","ptgs","fof","rrr","rrc","championship","ucl","ucl-none-rare","ucl_rare","ucl_non_rare","europa_base","ucl_tott","ucl_sbc","swap_deals_rewards","swap_deals_10","swap_deals_9","swap_deals_8","swap_deals_7","swap_deals_6","swap_deals_5","swap_deals_4","swap_deals_3","swap_deals_2","swap_deals_1","flashback_sbc","sbc_flashback","ucl_live","ucl_motm","europa_tott","europa_live","europa_motm","europa_sbc","potm_epl","potm_bundesliga","future_stars","future_stars_2","headliners","icon_moment","carniball","potm_mls","tots_moments","objective_reward","objective_reward_2","objective_reward_3","icon_swap_1","icon_swap_2","icon_swap_3","f_moment","potm_laliga","toty_nominee","winter_refresh","potm_ligue1","shapeshifter","sudamericana","libertadores_b","libertadores_g","conmebol_motm","b_moments","totssfn","summer_heat_nominee","summer_heat_2","summer_heat_winner","summer_heat","ucl_sd","fgs_swap","console_de","objective_ms","showdown_plus","showdown","whatif","whatif_2","sudamericana_totgs","libertadores_totgs","libertadores_flashback","fgs_swap_2","libertadores_c","icon_swap_3","fof_ptg","fof_blue","summer_stars","futties_nominee","premium","vintage","limited_edition_epic","limited_edition_legendary","vip","adidas","potm_seriea","potm_eredivisie","bronze","silver","gold","rare","non-rare"];jQuery(".playerVersion").hover(function(){$("#stats_box").removeClass("scream-stats-bg");$("#Player-card > .pcdisplay-picture > #player_pic").removeClass("scream-shadow");window.cardRareType=jQuery(this).data("rare-type");window.specialImg=jQuery(this).data("special-img");if(window.specialImg==1){$("#Player-card").find(".pcdisplay-picture ").addClass("special-img")}else{$("#Player-card").find(".pcdisplay-picture ").removeClass("special-img")}if(!window.SbcPrice){var psPriceOneHover=jQuery(this).data("ps-bin1");psPriceEle.html(psPriceOneHover+bigCoinsImg);var xboxPriceOneHover=jQuery(this).data("xbox-bin1");xboxPriceEle.html(xboxPriceOneHover+bigCoinsImg);var pcPriceOneHover=jQuery(this).data("pc-bin1");pcPriceEle.html(pcPriceOneHover+bigCoinsImg)}window.new_level=jQuery(this).data("level");window.new_revision=jQuery(this).data("revision");window.new_rare=jQuery(this).data("rare");var stats_key=jQuery(this).data("stats-key");stats_key=parseInt(stats_key);jQuery.each(jQuery("#Player-card"),function(){var pEle=jQuery(this);var splitted=jQuery(this).attr("class").split(" ");jQuery.each(splitted,function(index,value){jQuery.each(rareTpesArr,function(i,val){switch(value){case val:if(val==="gold"||val==="silver"||val==="bronze"){window.originalData["level"]=val;pEle.removeClass(val).addClass(window.new_level)}else if(val==="rare"||val==="non-rare"){window.originalData["rare"]=val;pEle.removeClass(val).addClass(window.new_rare)}else{window.originalData["revision"]=value;pEle.removeClass(value).addClass(window.new_revision)}break;default:pEle.addClass(window.new_revision);break}})})});jQuery("#player-top .pcdisplay-rat").text(jQuery(this).data("rating")).css({color:topcheck(window.new_revision+" "+window.new_level,window.year)});jQuery("#player-top .pcdisplay-pos").text(jQuery(this).data("position")).css({color:topcheck(window.new_revision+" "+window.new_level,window.year)});jQuery("#player-top .pcdisplay-skills-left").css({color:topcheck(window.new_revision+" "+window.new_level,window.year)});jQuery("#player-top.pcdisplay-wf-left").css({color:topcheck(window.new_revision+" "+window.new_level,window.year)});jQuery("#player-top .pcdisplay-wr-left").css({color:topcheck(window.new_revision+" "+window.new_level,window.year)});jQuery("#player-top .pcdisplay-name").css({color:namecheck(window.new_revision+" "+window.new_level,window.year)});jQuery("#player-top .pcdisplay-chem-style-name > span").css({color:namecheck(window.new_revision+" "+window.new_level,window.year)});if(jQuery(this).data("position")=="GK"){jQuery("#player-top .pcdisplay-ovr1").text(jQuery(this).data("pace"));jQuery("#player-top .pcdisplay-ovr2").text(jQuery(this).data("shooting"));jQuery("#player-top .pcdisplay-ovr3").text(jQuery(this).data("passing"));jQuery("#player-top .pcdisplay-ovr4").text(jQuery(this).data("dribbling"));jQuery("#player-top .pcdisplay-ovr5").text(jQuery(this).data("defending"));jQuery("#player-top .pcdisplay-ovr6").text(jQuery(this).data("heading"))}else{jQuery("#player-top .pcdisplay-ovr1").text(jQuery(this).data("pace"));jQuery("#player-top .pcdisplay-ovr2").text(jQuery(this).data("shooting"));jQuery("#player-top .pcdisplay-ovr3").text(jQuery(this).data("passing"));jQuery("#player-top .pcdisplay-ovr4").text(jQuery(this).data("dribbling"));jQuery("#player-top .pcdisplay-ovr5").text(jQuery(this).data("defending"));jQuery("#player-top .pcdisplay-ovr6").text(jQuery(this).data("heading"))}var squadId=jQuery(this).data("squadid");if(typeof squadId==="undefined"){squadId=""}jQuery("#p_squad_id").html(squadId);jQuery("#player_nation").attr("src",""+CDN+"/content/fifa"+window.year+"/img/nation/"+jQuery(this).data("nation")+".png");jQuery("#player_club").attr("src",""+CDN+"/content/fifa"+window.year+"/img/clubs/"+jQuery(this).data("club")+".png");jQuery("#player_pic").attr("src",""+CDN+"/content/fifa"+window.year+"/img/players/"+jQuery(this).data("resource")+".png");if(window.originalData["special_overlay"]){jQuery("#player-top  .pcdisplay-picture").removeClass("special-img")}jQuery(".stat_diff_cards").each(function(i,obj){jQuery(this).show()});changeStats(stats_key)},function(){if(boostLive==1){$("#Player-card > .pcdisplay-picture > #player_pic").addClass("scream-shadow");$("#stats_box").addClass("scream-stats-bg")}window.cardRareType=$("#player-top #Player-card").data("rare-type");window.specialImg=$("#player-top #Player-card").data("special-img");if(window.specialImg==1){$("#Player-card").find(".pcdisplay-picture ").addClass("special-img")}else{$("#Player-card").find(".pcdisplay-picture ").removeClass("special-img")}if(!window.SbcPrice){var psPriceOne=psPriceEle.data("price");if(typeof psPriceOne==="undefined")psPriceOne=0;psPriceEle.html(psPriceOne+bigCoinsImg);var xboxPriceOne=xboxPriceEle.data("price");if(typeof xboxPriceOne==="undefined")xboxPriceOne=0;xboxPriceEle.html(xboxPriceOne+bigCoinsImg);var pcPriceOne=pcPriceEle.data("price");if(typeof pcPriceOne==="undefined")pcPriceOne=0;pcPriceEle.html(pcPriceOne+bigCoinsImg)}if(window.new_revision!=""){switch(window.new_revision){case"if":jQuery("#player-top #Player-card").removeClass("if");break;case"otw":jQuery("#player-top #Player-card").removeClass("otw");break;case"purple":jQuery("#player-top #Player-card").removeClass("purple");break;case"award-winner":jQuery("#player-top #Player-card").removeClass("award-winner");break;case"toty":jQuery("#player-top #Player-card").removeClass("toty");break;case"bluered":jQuery("#player-top #Player-card").removeClass("bluered");break;case"stpatrick":jQuery("#player-top #Player-card").removeClass("stpatrick");break;case"motm":jQuery("#player-top #Player-card").removeClass("motm");break;case"pink":jQuery("#player-top #Player-card").removeClass("pink");break;case"tots_moments":jQuery("#player-top #Player-card").removeClass("tots_moments");break;case"tots":jQuery("#player-top #Player-card").removeClass("tots");break;case"oldimotm":jQuery("#player-top #Player-card").removeClass("oldimotm");break;case"imotm":jQuery("#Player-card").removeClass("imotm");break;case"futties-winners":jQuery("#player-top #Player-card").removeClass("futties-winners");break;case"storymode":jQuery("#player-top #Player-card").removeClass("storymode");break;case"fut-champ":jQuery("#player-top #Player-card").removeClass("fut-champ");break;case"confmotm":jQuery("#player-top #Player-card").removeClass("confmotm");break;case"newimotm":jQuery("#player-top #Player-card").removeClass("newimotm");break;case"halloween":jQuery("#player-top #Player-card").removeClass("halloween");break;case"sbc":jQuery("#player-top #Player-card").removeClass("sbc");break;case"sbc_premium":jQuery("#player-top #Player-card").removeClass("sbc_premium");break;case"promo":jQuery("#player-top #Player-card").removeClass("promo");break;case"white-blue-mls":jQuery("#player-top #Player-card").removeClass("white-blue-mls");break;case"fof":jQuery("#player-top #Player-card").removeClass("fof");break;case"futmas":jQuery("#player-top #Player-card").removeClass("futmas");break;case"fut-bd":jQuery("#player-top #Player-card").removeClass("fut-bd");break;case"marquee":jQuery("#player-top #Player-card").removeClass("marquee");break;case"ptgs":jQuery("#player-top #Player-card").removeClass("ptgs");break;case"rrr":jQuery("#player-top #Player-card").removeClass("rrr");break;case"rrc":jQuery("#player-top #Player-card").removeClass("rrc");break;case"championship":jQuery("#player-top #Player-card").removeClass("championship");break;case"motm_eu":jQuery("#player-top #Player-card").removeClass("motm_eu");break;case"rtr_contender":jQuery("#player-top #Player-card").removeClass("rtr_contender");break;case"rtr_selected":jQuery("#player-top #Player-card").removeClass("rtr_selected");break;case"rtr_worldcup":jQuery("#player-top #Player-card").removeClass("rtr_worldcup");break;case"united":jQuery("#player-top #Player-card").removeClass("united");break;case"euro":jQuery("#player-top #Player-card").removeClass("euro");break;case"ucl_rare":jQuery("#player-top #Player-card").removeClass("ucl_rare");break;case"ucl_non_rare":jQuery("#player-top #Player-card").removeClass("ucl_non_rare");break;case"europa_base":jQuery("#player-top #Player-card").removeClass("europa_base");break;case"ucl_tott":jQuery("#player-top #Player-card").removeClass("ucl_tott");break;case"ucl_sbc":jQuery("#player-top #Player-card").removeClass("ucl_sbc");break;case"swap_deals_rewards":jQuery("#player-top #Player-card").removeClass("swap_deals_rewards");break;case"swap_deals_11":jQuery("#player-top #Player-card").removeClass("swap_deals_11");break;case"swap_deals_10":jQuery("#player-top #Player-card").removeClass("swap_deals_10");break;case"swap_deals_9":jQuery("#player-top #Player-card").removeClass("swap_deals_9");break;case"swap_deals_8":jQuery("#player-top #Player-card").removeClass("swap_deals_8");break;case"swap_deals_7":jQuery("#player-top #Player-card").removeClass("swap_deals_7");break;case"swap_deals_6":jQuery("#player-top #Player-card").removeClass("swap_deals_6");break;case"swap_deals_5":jQuery("#player-top #Player-card").removeClass("swap_deals_5");break;case"swap_deals_4":jQuery("#player-top #Player-card").removeClass("swap_deals_4");break;case"swap_deals_3":jQuery("#player-top #Player-card").removeClass("swap_deals_3");break;case"swap_deals_2":jQuery("#player-top #Player-card").removeClass("swap_deals_2");break;case"swap_deals_1":jQuery("#player-top #Player-card").removeClass("swap_deals_1");break;case"flashback_sbc":jQuery("#player-top #Player-card").removeClass("flashback_sbc");break;case"sbc_flashback":jQuery("#player-top #Player-card").removeClass("sbc_flashback");break;case"ucl_live":jQuery("#player-top #Player-card").removeClass("ucl_live");break;case"ucl_motm":jQuery("#player-top #Player-card").removeClass("ucl_motm");break;case"europa_tott":jQuery("#player-top #Player-card").removeClass("europa_tott");break;case"europa_live":jQuery("#player-top #Player-card").removeClass("europa_live");break;case"europa_motm":jQuery("#player-top #Player-card").removeClass("europa_motm");break;case"future_stars":jQuery("#player-top #Player-card").removeClass("future_stars");break;case"future_stars_2":jQuery("#player-top #Player-card").removeClass("future_stars_2");break;case"headliners":jQuery("#player-top #Player-card").removeClass("headliners");break;case"carniball":jQuery("#player-top #Player-card").removeClass("carniball");
break;case"objective_reward":jQuery("#player-top #Player-card").removeClass("objective_reward");break;case"objective_reward_2":jQuery("#player-top #Player-card").removeClass("objective_reward_2");break;case"icon_swap_1":jQuery("#player-top #Player-card").removeClass("icon_swap_1");break;case"icon_swap_2":jQuery("#player-top #Player-card").removeClass("icon_swap_2");break;case"icon_swap_3":jQuery("#player-top #Player-card").removeClass("icon_swap_3");break;case"f_moment":jQuery("#player-top #Player-card").removeClass("f_moment");break;case"potm_laliga":jQuery("#player-top #Player-card").removeClass("potm_laliga");break;case"toty_nominee":jQuery("#player-top #Player-card").removeClass("toty_nominee");break;case"potm_mls":jQuery("#player-top #Player-card").removeClass("potm_mls");break;case"europa_sbc":jQuery("#player-top #Player-card").removeClass("europa_sbc");break;case"potm_epl":jQuery("#player-top #Player-card").removeClass("potm_epl");break;case"potm_bundesliga":jQuery("#player-top #Player-card").removeClass("potm_bundesliga");break;case"winter_refresh":jQuery("#player-top #Player-card").removeClass("winter_refresh");break;case"potm_ligue1":jQuery("#player-top #Player-card").removeClass("potm_ligue1");break;case"shapeshifter":jQuery("#player-top #Player-card").removeClass("shapeshifter");break;case"sudamericana":jQuery("#player-top #Player-card").removeClass("sudamericana");break;case"libertadores_b":jQuery("#player-top #Player-card").removeClass("libertadores_b");break;case"libertadores_g":jQuery("#player-top #Player-card").removeClass("libertadores_g");break;case"conmebol_motm":jQuery("#player-top #Player-card").removeClass("conmebol_motm");break;case"b_moments":jQuery("#player-top #Player-card").removeClass("b_moments");break;case"icon_moment":jQuery("#player-top #Player-card").removeClass("icon_moment");break;case"totssfn":jQuery("#player-top #Player-card").removeClass("totssfn");break;case"summer_heat_nominee":jQuery("#player-top #Player-card").removeClass("summer_heat_nominee");break;case"summer_heat_2":jQuery("#player-top #Player-card").removeClass("summer_heat_2");break;case"summer_heat_winner":jQuery("#player-top #Player-card").removeClass("summer_heat_winner");break;case"summer_heat":jQuery("#player-top #Player-card").removeClass("summer_heat");break;case"fgs_swap":jQuery("#player-top #Player-card").removeClass("fgs_swap");break;case"console_de":jQuery("#player-top #Player-card").removeClass("console_de");break;case"objective_ms":jQuery("#player-top #Player-card").removeClass("objective_ms");break;case"showdown_plus":jQuery("#player-top #Player-card").removeClass("showdown_plus");break;case"showdown":jQuery("#player-top #Player-card").removeClass("showdown");break;case"whatif":jQuery("#player-top #Player-card").removeClass("whatif");break;case"whatif_2":jQuery("#player-top #Player-card").removeClass("whatif_2");break;case"sudamericana_totgs":jQuery("#player-top #Player-card").removeClass("sudamericana_totgs");break;case"libertadores_totgs":jQuery("#player-top #Player-card").removeClass("libertadores_totgs");break;case"libertadores_flashback":jQuery("#player-top #Player-card").removeClass("libertadores_flashback");break;case"fgs_swap_2":jQuery("#player-top #Player-card").removeClass("fgs_swap_2");break;case"libertadores_c":jQuery("#player-top #Player-card").removeClass("libertadores_c");break;case"icon_swap_3":jQuery("#player-top #Player-card").removeClass("icon_swap_3");break;case"fof_ptg":jQuery("#player-top #Player-card").removeClass("fof_ptg");break;case"fof_blue":jQuery("#player-top #Player-card").removeClass("fof_blue");break;case"summer_stars":jQuery("#player-top #Player-card").removeClass("summer_stars");break;case"futties_nominee":jQuery("#player-top #Player-card").removeClass("futties_nominee");break;case"premium":jQuery("#player-top #Player-card").removeClass("premium");break;case"vintage":jQuery("#player-top #Player-card").removeClass("vintage");break;case"limited_edition_epic":jQuery("#player-top #Player-card").removeClass("limited_edition_epic");break;case"limited_edition_legendary":jQuery("#player-top #Player-card").removeClass("limited_edition_legendary");break;case"vip":jQuery("#player-top #Player-card").removeClass("vip");break;case"adidas":jQuery("#player-top #Player-card").removeClass("adidas");break;case"potm_seriea":jQuery("#player-top #Player-card").removeClass("potm_seriea");break;case"potm_eredivisie":jQuery("#player-top #Player-card").removeClass("potm_eredivisie");break}}if(window.new_level!=""){switch(window.new_level){case"bronze":jQuery(" #player-top#Player-card").removeClass("bronze");break;case"silver":jQuery(" #player-top#Player-card").removeClass("silver");break;case"gold":jQuery("#player-top #Player-card").removeClass("gold");break}}if(window.new_rare!=""){switch(window.new_rare){case"rare":jQuery("#player-top #Player-card").removeClass("rare");break;case"non-rare":jQuery("#player-top #Player-card").removeClass("non-rare");break}}jQuery("#player-top  .pcdisplay-name").css({color:namecheck(window.originalData["revision"]+" "+window.originalData["level"],window.year)});jQuery("#player-top  .pcdisplay-chem-style-name > span").css({color:window.chemTextColor});jQuery("#player-top  #p_squad_id").html(window.originalData["squad_id"]);jQuery("#player-top  #player_nation").attr("src",window.originalData["nation"]);jQuery("#player-top  #player_club").attr("src",window.originalData["club"]);jQuery("#player-top  #player_pic").attr("src",window.originalData["playerimg"]);if(window.originalData["special_overlay"]){jQuery("#player-top  .pcdisplay-picture").addClass("special-img")}jQuery("#player-top  #Player-card").addClass(window.originalData["level"]);jQuery("#player-top  #Player-card").addClass(window.originalData["revision"]);jQuery("#player-top  #Player-card").addClass(window.originalData["rare"]);jQuery("#player-top  .pcdisplay-rat").text(window.originalData["rating"]).css({color:topcheck(window.originalData["revision"]+" "+window.originalData["level"],window.year)});jQuery("#player-top  .pcdisplay-pos").text(window.originalData["position"]).css({color:topcheck(window.originalData["revision"]+" "+window.originalData["level"],window.year)});jQuery("#player-top  .pcdisplay-skills-left").css({color:topcheck(window.originalData["revision"]+" "+window.originalData["level"],window.year)});jQuery("#player-top  .pcdisplay-wf-left").css({color:topcheck(window.originalData["revision"]+" "+window.originalData["level"],window.year)});jQuery("#player-top  .pcdisplay-wr-left").css({color:topcheck(window.originalData["revision"]+" "+window.originalData["level"],window.year)});jQuery("#player-top  .pcdisplay-ovr1").text(window.originalData["pace"]);jQuery("#player-top  .pcdisplay-ovr2").text(window.originalData["shot"]);jQuery("#player-top  .pcdisplay-ovr3").text(window.originalData["pass"]);jQuery("#player-top  .pcdisplay-ovr4").text(window.originalData["dribbling"]);jQuery("#player-top  .pcdisplay-ovr4").text(window.originalData["dribblingp"]);jQuery("#player-top  .pcdisplay-ovr5").text(window.originalData["defending"]);jQuery("#player-top .pcdisplay-ovr6").text(window.originalData["heading"]);jQuery(".stat_diff_cards").each(function(i,obj){jQuery(this).hide()});if(window.boostedPlayer){var tempP=window.boostedPlayerKey;restoreBoost()}else{tempP=0;changeStats(tempP)}});$("#review-input").click(function(){$(this).fadeOut();$(".reviews-area-holder").hide();$("#close-review-form").show();var slideDuration=500;$(".write-a-review-form").stop(true,true).fadeIn({duration:slideDuration,queue:false}).css("display","none").slideDown(slideDuration)});$("#close-review-form").click(function(){$(this).hide();$(".reviews-area-holder").show();var slideDuration=500;$(".write-a-review-form").stop(true,true).fadeOut({duration:slideDuration,queue:false}).slideUp(slideDuration);$("#review-input").fadeIn()});$(".psw-btn").click(function(){$(".psw-btn").each(function(i,obj){jQuery(this).removeClass("active")});jQuery(this).addClass("active");window.linkPageNum=1;var type=jQuery(this).attr("data-type");doAjaxRequest(type)});jQuery("#linked-area").on("click","#next",function(){window.linkPageNum="";var page=jQuery(this).attr("data-type");window.linkPageNum=jQuery(this).attr("data-page");doAjaxRequest(page)});jQuery("#linked-area").on("click","#previous",function(){window.linkPageNum="";var page=jQuery(this).attr("data-type");window.linkPageNum=jQuery(this).attr("data-page");doAjaxRequest(page)});$("#link-btn").click(function(){window.linkPageNum=1;$(this).toggleClass("active");var type=jQuery(this).attr("data-type");if(typeof type==="undefined")type="perfect";if(jQuery("#linked-players-area").is(":empty")){doAjaxRequest(type)}$("#linked-area").slideToggle("slow",function(){})});var premiumUser=$("#site-user-info").data("premium");jQuery("div[data-rel]").tooltip();if(premiumUser==="premium"){var adCheck=false}else{adCheck=true}adCheck=false;var tlpos=true;window.SbcPrice=false;window.initGraph=false;function switchMarketSbcPricesBox(action){if(action==="sbcPrices"){$(".box_price").css({"border-bottom":"none",opacity:"1"});$(".bin_price ").hide();$(".box_price_ps").find(".divider_w").eq(1).hide();$(".box_price_xbox").find(".divider_w").eq(1).hide();$(".box_price_pc").find(".divider_w").eq(1).hide();$(".pr").hide();$(".price_update").hide();$(".market-sales-link").hide();$(".divider_price_top").hide();$(".box-sbc-prices").show()}else{$(".box-sbc-prices").hide();$(".box_price").css({"border-bottom":"none",opacity:"1"});$(".bin_price ").show();$(".box_price_ps").find(".divider_w").eq(1).show();$(".box_price_xbox").find(".divider_w").eq(1).show();$(".box_price_pc").find(".divider_w").eq(1).show();$(".show").show();$(".pr").show();$(".market-sales-link").show();$(".divider_price_top").show();$(".price_update").show()}}$(".market-sbc-price-toggle").click(function(){type=$(this).attr("data-type");window.initGraph=true;if(type=="sbc-prices"){$(".market-sbc-price-toggle").attr("data-type","market-prices");switchMarketSbcPricesBox("marketPrices");window.SbcPrice=false}else{if($(".box-sbc-prices").length===0){sbcPricesHtml($playerSetInfo)}$(".market-sbc-price-toggle").attr("data-type","sbc-prices");switchMarketSbcPricesBox("sbcPrices");window.SbcPrice=true}drawStockChart("daily_graph");window.initGraph=false});function sbcPricesHtml(obj){$playerSetInfoArr=JSON.parse(obj);if($playerSetInfoArr.active==0){setPathType="EXPIRED"}else{setPathType="ALL"}if($playerSetInfoArr.expireDate.length>0){expireAt='<span style="font-size:11px;">(expires '+$playerSetInfoArr.expireDate+")</span>"}else{expireAt='<span style="font-size:11px;">(Never expires)</span>'}sbcLogo='<img class="mr-1 sbc-logo-lbin" src="/design/img/sbc_big.png" style="width: 20px; position: relative; top: -3px;" />';setLogo='<div class="w-100 player-set-logo" style="min-height: 93px;"><hr class="mb-0"><a href="/squad-building-challenges/'+setPathType+"/"+$playerSetInfoArr.SetID+'"><img class="mr-2" src="/content/fifa'+window.year+"/img/sbc/sbc_set_image_"+$playerSetInfoArr.imageID+'.png" style="width: 80px; position: relative; top: -3px;" /></a></div>';estimatedTextDiv='<div class="w-100 estimated-price-sbc-text" style="font-size: 12px; color: #882d9f; font-weight: 500;"  >Estimated SBC price</div>';expiresHtml='<div class="text-center text-white mt-2 py-1 w-100" style="background: rgb(85, 204, 162); color: rgb(255, 255, 255);"><i class="icon-checkmark3" style="position: relative; top: 1px;"></i> ACTIVE '+expireAt+"</div>";expiredHtml='<div class="text-center text-white mt-2 py-1 w-100" style="background: rgb(227, 18, 72);"><i class="icon-blocked" style="position: relative; top: 1px;"></i> EXPIRED</div>';coincIcon='<img alt="c" class="coins_icon_l_bin" src="/design/img/coins_bin.png">';boxes=["box_price_ps","box_price_xbox","box_price_pc"];for(var i=0,len=boxes.length;i<len;i++){sbcPrice=$playerSetInfoArr.ps_price;if(boxes[i]=="box_price_xbox")sbcPrice=$playerSetInfoArr.xbox_price;if(boxes[i]=="box_price_pc")sbcPrice=$playerSetInfoArr.pc_price;htmlBox="";htmlBox='<div class="row col-md-12 box-sbc-prices justify-content-center text-center px-0">';htmlBox+='<div class="pt-2 sbc-lbin" style="font-size: 1.5rem; color: #7f8a99;font-family: Lato,sans-serif; font-weight: bold">'+sbcLogo+" "+number_format(sbcPrice)+" "+coincIcon+"</div>  ";htmlBox+=estimatedTextDiv;htmlBox+="";htmlBox+=setLogo;if($playerSetInfoArr.active==1){htmlBox+=expiresHtml}else{htmlBox+=expiredHtml}htmlBox+="</div>";$("."+boxes[i]).append(htmlBox)}}if($playerSetInfo.length>10&&pricingType==0){$("#prices-loader").hide();switchMarketSbcPricesBox("sbcPrices");sbcPricesHtml($playerSetInfo)}else{doAjaxRequest("prices")}var attempts;function doAjaxRequest(page){attempts=0;doAjaxRequestLoop(page)}function doAjaxRequestLoop(page){attempts+=1;if(attempts>3){console.log("Something went wrong, please try to refresh the page.");return}var resourceId=jQuery("#page-info").attr("data-player-resource");if(page=="prices"){jQuery("#prices-loader").show();var allVersionsresourceIds=jQuery("#page-info").attr("data-all-versions-resource");var dataString="player="+resourceId+"&rids="+allVersionsresourceIds;var url="/"+window.year+"/playerPrices";var data_type="JSON"}if(page=="perfect"||page=="strong"||page=="weak"){var baseid=jQuery("#page-info").attr("data-baseid");var pnation=jQuery("#page-info").attr("data-nation");var pleague=jQuery("#page-info").attr("data-league");var pclub=jQuery("#page-info").attr("data-club");var pposition=jQuery("#page-info").attr("data-position");var pageNum=window.linkPageNum;dataString="baseid="+baseid+"&nation="+pnation+"&league="+pleague+"&club="+pclub+"&position="+pposition+"&linktype="+page+"&page="+pageNum;url="/"+window.year+"/linkedTo";data_type="html"}jQuery.ajax({url:url,type:"GET",data:dataString,cache:true,dataType:data_type,success:function(data){if(page=="prices"&&typeof data[resourceId]!=="undefined"&&typeof data[resourceId]["prices"]!=="undefined"){data=jQuery.parseJSON(JSON.stringify(data));var psPrices=data[resourceId]["prices"]["ps"];var xboxPrices=data[resourceId]["prices"]["xbox"];var pcPrices=data[resourceId]["prices"]["pc"];if(typeof psPrices!=="undefined"){var psLcPrice=psPrices["LCPrice"];jQuery("#ps-lowest-1").html(psPrices["LCPrice"]+bigCoinsImg).attr("data-price",psPrices["LCPrice"]).show();if(mobileDetect===1){jQuery("#ps-updated").html(""+psPrices["updated"]).show();$("#ps-scroll-price").html(psPrices["LCPrice"])}else{jQuery("#ps-updated").html("Price Updated: "+psPrices["updated"]).show()}jQuery("#ps-prp").html("PRP: "+psPrices["PRP"]+"%").show();jQuery(".ps-progress-prp").find(".progress-bar").css("width",psPrices["PRP"]+"%");jQuery("#pr_ps").html("PR: "+psPrices["MinPrice"]+" - "+psPrices["MaxPrice"]).show();if(typeof psLcPrice==="string"&&psLcPrice.indexOf(",")>=0){jQuery("#pslowest").html(parseInt(psLcPrice.replace(/,/g,"")))}else{jQuery("#pslowest").html(parseInt(psLcPrice))}}if(typeof xboxPrices!=="undefined"){var xboxLcPrice=xboxPrices["LCPrice"];jQuery("#xbox-lowest-1").html(xboxPrices["LCPrice"]+bigCoinsImg).attr("data-price",xboxPrices["LCPrice"]).show();jQuery("#pr_xbox").html("PR: "+xboxPrices["MinPrice"]+" - "+xboxPrices["MaxPrice"]).show();if(mobileDetect===1){jQuery("#xbox-updated").html(""+xboxPrices["updated"]).show();$("#xbox-scroll-price").html(xboxPrices["LCPrice"])}else{jQuery("#xbox-updated").html("Price Updated: "+xboxPrices["updated"]).show()}jQuery("#xbox-prp").html("PRP: "+xboxPrices["PRP"]+"%").show();jQuery(".xb-progress-prp").find(".progress-bar").css("width",xboxPrices["PRP"]+"%");if(typeof xboxLcPrice==="string"&&xboxLcPrice.indexOf(",")){jQuery("#xboxlowest").html(parseInt(xboxLcPrice.replace(/,/g,"")))}else{jQuery("#xboxlowest").html(parseInt(xboxLcPrice))}}if(typeof pcPrices!=="undefined"){var pcLcPrice=pcPrices["LCPrice"];jQuery("#pc-lowest-1").html(pcPrices["LCPrice"]+bigCoinsImg).attr("data-price",pcPrices["LCPrice"]).show();if(mobileDetect===1){jQuery("#pc-updated").html(""+pcPrices["updated"]).show();$("#pc-scroll-price").html(pcPrices["LCPrice"])}else{jQuery("#pc-updated").html("Price Updated: "+pcPrices["updated"]).show()}jQuery("#pc-prp").html("PRP: "+pcPrices["PRP"]+"%").show();jQuery(".pc-progress-prp").find(".progress-bar").css("width",pcPrices["PRP"]+"%");jQuery("#pr_pc").html("PR: "+pcPrices["MinPrice"]+" - "+pcPrices["MaxPrice"]).show();if(typeof pcLcPrice==="string"&&pcLcPrice.indexOf(",")){jQuery("#pclowest").html(parseInt(pcLcPrice.replace(/,/g,"")))}else{jQuery("#pclowest").html(parseInt(pcLcPrice))}}else{if(mobileDetect===1){jQuery("#pc-updated").html("Never").show()}else{jQuery("#pc-updated").html("Price Updated: Never").show()}jQuery("#pc-prp").html("PRP: 0%").show();jQuery("#pr_pc").html("PR: "+0+" - "+0).show()}for(i=2;i<6;i++){if(typeof psPrices!=="undefined"){jQuery("#ps-lowest-"+i).html(psPrices["LCPrice"+i]+smallCoinsImg).show();if(i<4){var price=psPrices["LCPrice"+i];if(typeof price==="string"&&price.indexOf(",")){jQuery("#pslowest"+i).html(parseInt(price.replace(/,/g,"")))}else{jQuery("#pslowest"+i).html(parseInt(price))}}}if(typeof psPrices!=="undefined"){jQuery("#xbox-lowest-"+i).html(xboxPrices["LCPrice"+i]+smallCoinsImg).show();if(i<4){price=xboxPrices["LCPrice"+i];if(typeof price==="string"&&price.indexOf(",")){jQuery("#xboxlowest"+i).html(parseInt(price.replace(/,/g,"")))}else{jQuery("#xboxlowest"+i).html(parseInt(price))}}}if(typeof pcPrices!=="undefined"){jQuery("#pc-lowest-"+i).html(pcPrices["LCPrice"+i]+smallCoinsImg).show();if(i<4){price=pcPrices["LCPrice"+i];if(typeof price==="string"&&price.indexOf(",")){jQuery("#pclowest"+i).html(parseInt(price.replace(/,/g,"")))}else{jQuery("#pclowest"+i).html(parseInt(price))}}}}jQuery.each(data,function(key,value){var verEle=jQuery("#p"+key);verEle.attr("data-ps-bin1",value["prices"]["ps"]["LCPrice"]);verEle.attr("data-xbox-bin1",value["prices"]["xbox"]["LCPrice"]);if(typeof value["prices"]["pc"]!=="undefined"){verEle.attr("data-pc-bin1",value["prices"]["pc"]["LCPrice"])}});jQuery(".box_price_ps").css("opacity","1");jQuery(".box_price_xbox").css("opacity","1");jQuery(".box_price_pc").css("opacity","1");jQuery("#prices-loader").hide()}else if(page=="prices"&&typeof data["prices"]==="undefined"){if(mobileDetect===1){jQuery("#ps-updated").html("Never").show();jQuery("#xbox-updated").html("Never").show();jQuery("#pc-updated").html("Never").show()}else{jQuery("#ps-updated").html("Price Updated: Never").show();jQuery("#xbox-updated").html("Price Updated: Never").show();jQuery("#pc-updated").html("Price Updated: Never").show()}jQuery("#ps-prp").html("PRP: 0%").show();jQuery("#xbox-prp").html("PRP: 0%").show();jQuery("#pc-prp").html("PRP: 0%").show();jQuery("#pr_ps").html("PR: "+0+" - "+0).show();jQuery("#pr_xbox").html("PR: "+0+" - "+0).show();jQuery("#pr_pc").html("PR: "+0+" - "+0).show();jQuery(".box_price_ps").css("opacity","1");jQuery(".box_price_xbox").css("opacity","1");jQuery(".box_price_pc").css("opacity","1");jQuery("#prices-loader").hide()}if(page=="perfect"||page=="strong"||page=="weak"){jQuery("#linked-players-area").html(data).hide().fadeIn(500)}userPlatform=getCookie("platform");if(userPlatform==="ps4"){lowestCurrentPrice=parseInt($("#pslowest").html())}if(userPlatform==="xone"){lowestCurrentPrice=parseInt($("#xboxlowest").html())}if(userPlatform==="pc"){lowestCurrentPrice=parseInt($("#pclowest").html())}if(typeof lowestCurrentPrice!="undefined"&&lowestCurrentPrice!=null&&lowestCurrentPrice>0){closingPrice=parseInt($("#price-trend").data("closing-price"));coinsChange=lowestCurrentPrice-closingPrice;coinsChangePer=100*(lowestCurrentPrice-closingPrice)/closingPrice;coinsChangePer=coinsChangePer.toFixed(2);trendColor="#12faa5;";arrowIcon="up5";if(coinsChangePer<0){trendColor="#ff0054";arrowIcon="down5"}priceSign="+";if(coinsChange<0){priceSign="-";coinsChange=coinsChange*-1}if(!is_NaN(coinsChangePer)){$("#price-trend").html(' <i class="icon-arrow-'+arrowIcon+'" style="color: '+trendColor+';"></i>'+coinsChangePer+"% ("+priceSign+shortNumber(coinsChange)+")")}}markMyPlatform();window.pricesLoaded=true},error:function(error){jQuery("#prices-loader").hide();doAjaxRequestLoop(page)}})}var is_NaN=function(n){return n!==n};function adBlockNotDetected(){if(!window.pricesLoaded){doAjaxRequest("prices")}}function adBlockDetected(){$("#prices-loader").hide();$(".box_price").hide();msgHtml='<div class="col-12 card text-center mb-5 my-3 p-5" style="background: url(/design/img/backgrounds/fut19/sad_char_bg_a.png); background-size: cover;     background-position-y: -20px;  ">'+'<div class="p-4" style="background: rgba(0,0,0,0.6); border-radius: 10px;"><div> '+'<h3 class="text-danger mt-3"><i class="icon-sad"></i> AD BLOCKER DETECTED</h3></div> '+"<div>"+'<p class="text-white">FUTBIN is dependent on advertisements and we have noticed you are using an ad blocker. Please whitelist FUTBIN site on your ad blocker in order to get full access to FUTBIN features</p>'+"</div> "+"</div></div>";$(".prices_block").html(msgHtml)}Highcharts.theme={plotOptions:{line:{lang:{thousandsSep:","},marker:{enabled:false},shadow:{width:20,opacity:.1}}}};jQuery(function(){Highcharts.setOptions(Highcharts.theme);if(!checkCookie("xbox")){setCookie("xbox",true)}if(!checkCookie("ps")){setCookie("ps",true)}if(!checkCookie("pc")){setCookie("pc",true)}drawStockChart("daily_graph");jQuery('a[data-toggle="tab"]').on("shown.bs.tab",function(e){var containerId=jQuery(e.target).attr("href");if(containerId=="#hourly_graph"){containerId="#today"}containerId=containerId.replace("#","");drawStockChart(containerId)})});fillFlagColor=function(graph_type){if(graph_type=="1"){var graphColorArr=["#000","#000","#dcb20a"]}else if(graph_type=="2"){graphColorArr=["#046aaf","#046aaf","#fff"]}else if(graph_type=="3"){graphColorArr=["#00591b","#00591b","#fff"]}else if(graph_type=="4"){graphColorArr=["#6099e6","#6099e6","#fff"]}else{graphColorArr=["#fff","#000"]}return graphColorArr};drawStockChart=function(containerId){var containerObj=jQuery("#"+containerId);if(containerObj.html()==""||window.initGraph){var data_type="json";var url="/"+window.year+"/playerGraph";var dataString={};dataString["type"]=containerId;dataString["year"]=window.year;dataString["player"]=window.playerResource;dataString["set_id"]="";if(window.SbcPrice||pricingType==0){dataString["set_id"]=$("#player-set-info").data("set-id")}jQuery.ajax({url:url,type:"GET",data:dataString,cache:"",dataType:data_type,success:function(data){var isRange=true;var xAxis={type:"datetime",dateTimeLabelFormats:{month:"%e. %b",year:"%b"}};if(containerId!="daily_graph"){isRange=false;var min,max;if(containerId==="today"){var date=getPreviousDate(1);min=Date.UTC(date.getFullYear(),date.getMonth(),date.getDate());date=new Date;max=Date.UTC(date.getFullYear(),date.getMonth(),date.getDate())}else if(containerId==="yesterday"){date=getPreviousDate(2);min=Date.UTC(date.getFullYear(),date.getMonth(),date.getDate());date=getPreviousDate(1);max=Date.UTC(date.getFullYear(),date.getMonth(),date.getDate())}else if(containerId==="da_yesterday"){date=getPreviousDate(3);min=Date.UTC(date.getFullYear(),date.getMonth(),date.getDate());date=getPreviousDate(2);max=Date.UTC(date.getFullYear(),date.getMonth(),date.getDate())}xAxis={type:"datetime",dateTimeLabelFormats:{month:"%e. %b",year:"%b"}}}var flagData=[];if(data["flag"]!="false"&&data["flag"]!=""){jQuery.each(data["flags"],function(key,flag){var date=flag["flag_date"];date=date.replace(" ","T");date=new Date(date);var colorArray=fillFlagColor(flag["design"]);var temp={x:Date.UTC(date.getFullYear(),date.getMonth(),date.getDate(),date.getHours(),date.getMinutes(),date.getSeconds(),0),title:flag["title"],text:flag["description"],color:colorArray[0],fillColor:colorArray[1],style:{color:colorArray[2],borderRadius:"5"}};flagData.push(temp)});var flags={type:"flags",name:"Events",data:flagData,shape:"flag",width:45}}var graphColors=["#216c9f","#3498db"];var seriesData=[{name:"XBOX",type:"line",id:"xb",shadow:false,color:"#7eb900",data:data["xbox"],tooltip:{valueDecimals:0},visible:getCookie("xbox")==="true"},{name:"PS",type:"line",id:"ps",shadow:false,data:data["ps"],color:"#3498db",tooltip:{valueDecimals:0},visible:getCookie("ps")==="true"},{name:"PC",type:"line",id:"pc",shadow:false,data:data["pc"],color:"#f05922",tooltip:{valueDecimals:0},visible:getCookie("pc")==="true"}];window.stockChart=containerObj.highcharts("StockChart",{stockTools:{gui:{buttons:["indicators","fullScreen","simpleShapes","lines","crookedLines","measure","advanced","toggleAnnotations","zoomChange"]}},rangeSelector:{enabled:isRange,selected:5,inputEnabled:true,buttons:[{type:"month",count:1,text:"1m"},{type:"month",count:3,text:"3m"},{type:"month",count:6,text:"6m"},{type:"ytd",text:"YTD"},{type:"year",count:1,text:"1y"},{type:"all",text:"All"}]},legend:{enabled:true},navigator:{enabled:true},credits:{href:"https://www.futbin.com",text:"Futbin.com"},xAxis:xAxis,yAxis:{title:{text:"Average Price"},min:0,plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{useHTML:true,valueSuffix:'<span style="position: relative; top: -2px; width:340px;"> <img style="width:10px; position: relative; top: 1px;" src="'+window.cdn_url+'/design/img/coins_bin.png"></span>',valueDecimals:0},plotOptions:{series:{events:{legendItemClick:function(event){var selected=this.index;var flag=this.visible?false:true;var name=this.name.toLowerCase();setCookie(name,flag);return true}}},spline:{marker:{enabled:true}}},chart:{backgroundColor:"#fff",events:{load:function(){allSeries=this.series}}},series:seriesData})},error:function(error){console.log("error")}})}};getPreviousDate=function(day){var today=new Date;var prevDate=new Date(today);prevDate.setDate(today.getDate()-day);return prevDate};$(".graph-box").on("click",".highcharts-full-screen",function(){$("#Player-card").clone().appendTo(".highcharts-container ");$(".highcharts-container ").find("#Player-card").removeClass("card-glow");$(".highcharts-container ").find("#Player-card").draggable()});if(document.addEventListener){document.addEventListener("webkitfullscreenchange",exitHandler,false);document.addEventListener("mozfullscreenchange",exitHandler,false);document.addEventListener("fullscreenchange",exitHandler,false);document.addEventListener("MSFullscreenChange",exitHandler,false)}function exitHandler(){if(!document.webkitIsFullScreen&&!document.mozFullScreen&&!document.msFullscreenElement){$(".highcharts-container ").find("#Player-card").remove()}}$("#graph_box_content").on("click",".highcharts-indicators ",function(){showIndicators()});function showIndicators(){$(".highcharts-indicator-list").each(function(i,obj){val=$(this).text();$ele=$(this);indiArr=["SMA","EMA","Trendline","BB","Aroon","Aroon Oscillator","DPO","MACD","DEMA","TEMA","TRIX","APO","PPO","Rate of Change","WMA","Acceleration Bands"];if(jQuery.inArray(val,indiArr)!=-1){$ele.show()}})}var player_ids={};var idArr=[];var base_url=jQuery("#domAndProtocol").attr("data-domain");var data_url=jQuery("#baseurl").attr("data-url");var url_year=jQuery("#page-year").attr("data-year");var year=$("#year").attr("data-year");var playerStats=jQuery.parseJSON(jQuery("#player_stats_json").html());var playerChem=jQuery.parseJSON(jQuery("#player_chem_json").html());var pChems={};var pPChems={};var pSChems={};var pModified={};var totalSubStats={};var totalMainStats={};var pStatsObj={};var pRpp={};var totalP={};jQuery.each(playerStats,function(key,val){if(!runChemStyle)return false;mainP=0;if(window.boostedPlayer){var mainP=window.boostedPlayerKey}else{mainP=0}player_ids[key]=jQuery('.player-ids[data-key="'+key+'"]').attr("data-player-id");idArr.push(player_ids[key]);pStatsObj[key]={};totalP[key]=key;if(key===mainP){jQuery("#chem_style_chemistry-"+key).select2({width:"resolve"}).on("change",function(e){jQuery.each(pSChems,function(ckey,pval){pSChems[ckey]=e.target.value;var pchem=jQuery("#chem_style_player_chemistry-"+mainP).val();var schem=jQuery("#chem_style_chemistry-"+mainP).val();chemStyleStats(pChems[ckey],playerStats[ckey],schem,pchem,isGK)});chemStyleChange(mainP,true,false)});jQuery("#chem_style_player_chemistry-"+key).select2({width:"50"}).on("change",function(e){jQuery.each(pPChems,function(pkey,pval){pPChems[pkey]=e.target.value;var pchem=jQuery("#chem_style_player_chemistry-"+mainP).val();var schem=jQuery("#chem_style_chemistry-"+mainP).val();chemStyleStats(pChems[pkey],playerStats[pkey],schem,pchem,isGK)});chemStyleChange(mainP,true,false)})}chem=playerChem.hasOwnProperty("chem")&&playerChem["chem"].hasOwnProperty(mainP)?playerChem["chem"][mainP]:null;pchem=playerChem.hasOwnProperty("pchem")&&playerChem["pchem"].hasOwnProperty(mainP)?playerChem["pchem"][mainP]:null;schem=playerChem.hasOwnProperty("schem")&&playerChem["schem"].hasOwnProperty(mainP)?playerChem["schem"][mainP]:null;if(chem==="null"){chem=null}if(pchem==="null"){pchem=null}if(schem==="null"){schem=null}pChems[key]=chem!=null?chem:null;pPChems[key]=pchem!=null?pchem:10;pSChems[key]=schem!=null?schem:100;if(key===mainP){if(chem==null){}else{jQuery(".pick_style[data-type='"+chem+"']").addClass("active");jQuery("#chem_style_player_chemistry-"+mainP).val(pPChems[key]).trigger("change.select2");jQuery("#chem_style_chemistry-"+mainP).val(pSChems[key]).trigger("change.select2");chemElem=$(".chem_type_"+mainP);var chemName=chemElem.attr("data-tname");var imgSrc=chemElem.attr("data-img");var img="<img style='width: 15px;' alt='chem' src="+imgSrc+">";var version=$("#version"+mainP).attr("data-version");var chemColor=namecheck(version,window.year);$("#style_name[data-player='"+key+"']").html(img+" "+chemName);$(".applied-chem-style-"+key+"").html(img+' <span style="color: '+chemColor+';">'+chemName+"</span>").show()}setStatsColor()}if(chem==null){}else{mainP=0;var pchem=jQuery("#chem_style_player_chemistry-"+mainP).val();var schem=jQuery("#chem_style_chemistry-"+mainP).val();chemStyleStats(pChems[key],playerStats[key],schem,pchem,isGK)}});if(window.chemUrlIsActive==1&&window.chemStyleUrlName!=0){chemStyleChange(0,true,false);var chemUrlImg=$(".pick_style.active").data("img");var chemUrlName=$(".pick_style.active").data("tname");$("#Player-card").find(".pcdisplay-chem-style-name").html('<img style="width: 15px;" alt="chem" src="'+chemUrlImg+'">'+" "+'<span style="color: '+window.chemTextColor+';">'+chemUrlName+"</span>")}else{chemStyleChange(0,false,true)}jQuery(".pick_style").on("click",function(){var pKey=0;var chem=jQuery(this).attr("data-type");var type=jQuery(this).attr("data-tname");var imgSrc=jQuery(this).attr("data-img");var img="<img style='width: 15px;' alt='chem' src="+imgSrc+">";if(window.year>18){$("#Player-card").find(".pcdisplay-chem-style-name").html('<span class="fut_icon icon_chemstyle_'+chem+'"></span>'+" "+'<span style="color: '+window.chemTextColor+'";>'+type+"</span>")}else{$("#Player-card").find(".pcdisplay-chem-style-name").html('<img style="width: 15px;" alt="chem" src="'+imgSrc+'">'+" "+'<span style="color: '+window.chemTextColor+'";>'+type+"</span>")}var version=$("#version"+pKey).attr("data-version");var chemColor=namecheck(version,window.year);$("#style_name[data-player='"+pKey+"']").html(img+" "+type);$(".applied-chem-style-"+pKey+"").html(img+' <span style="color: '+chemColor+';">'+type+"</span>").show();if(!$(this).find("a").find("i").length){$(".pick_style[data-player='"+pKey+"']").each(function(i,obj){$(this).find("a").find("i").remove()});$(this).find("a").append("")}jQuery(".pick_style").each(function(){jQuery(this).removeClass("active")});jQuery(this).addClass("active");if(window.boostedPlayer){pKey=window.boostedPlayerKey}else{pKey=0}jQuery.each(pChems,function(key,val){mainP=0;var pchem=jQuery("#chem_style_player_chemistry-"+mainP).val();var schem=jQuery("#chem_style_chemistry-"+mainP).val();pChems[key]=chem;chemStyleStats(chem,playerStats[key],schem,pchem,isGK)});chemStyleChange(pKey,true,false)});jQuery(".reset_chem_style").on("click",function(){$("#chem_style_chemistry-0").val("100").trigger("change.select2");$("#chem_style_player_chemistry-0").val("10").trigger("change.select2");
jQuery(".pick_style.active").removeClass("active");if(window.boostedPlayer){var pKey=window.boostedPlayerKey}else{pKey=0}jQuery.each(playerStats,function(key,val){mainP=0;var pchem=jQuery("#chem_style_player_chemistry-"+mainP).val();var schem=jQuery("#chem_style_chemistry-"+mainP).val();pChems[key]=null;pModified[key]=false;chemStyleStats(pChems[key],playerStats[key],schem,pchem,isGK)});chemStyleChange(pKey,false,true);modUrl(false);setStatsColor();$("#Player-card").find(".pcdisplay-chem-style-name").html("")});function chemStyleChange(p,mod,reset){if(!runChemStyle)return false;if(boostLive!=1){$("#Player-card > .pcdisplay-picture > #player_pic").removeClass("scream-shadow")}mainP=0;pModified[p]=mod?true:false;modUrl(false);var chem=pChems[p];var pchem=jQuery("#chem_style_player_chemistry-"+mainP).val();var schem=jQuery("#chem_style_chemistry-"+mainP).val();chemStyleStats(chem,playerStats[p],schem,pchem,isGK);updateStats(p,reset);setStatsColor()}function updateStats(p,reset){totalSubStats[p]=0;totalMainStats[p]=0;totalChemStyleStats=0;var sumFullStats={};jQuery.each(playerStats[p],function(mainKey,mainVal){jQuery.each(mainVal,function(key,val){if(reset){var stat=val.value;var diffStat=0;$(".applied-chem-style-"+p).html("");$(".chem_select_"+p).html('<img alt="chem" style="width: 15px;" src="'+window.cdn_url+'/design/img/icons/chem_style/y_1.png"> Basic ')}else{var stat=val.hasOwnProperty("totalStat")&&!isNaN(val.totalStat)?val.totalStat:val.value;var diffStat=val.hasOwnProperty("diffStat")&&!isNaN(val.diffStat)?val.diffStat:0}var diffStatHtml="";var diffStatStyleColor="";var cardDiffColor="";if(diffStat>0){diffStatHtml="+"+Math.round(diffStat);diffStatStyleColor=greenRedDiff(window.cardRareType,year)["green"];cardDiffColor=greenRedDiff(window.cardRareType,year)["green"]}else if(diffStat<0){diffStatHtml=Math.round(diffStat);diffStatStyleColor=greenRedDiff(window.cardRareType,year)["red"];cardDiffColor=greenRedDiff(window.cardRareType,year)["red"]}else{cardDiffColor="#fff"}var id=val.id;if(val.type==="main"){p=0;var statValElem=jQuery("#main-"+id+"-val-"+p).children(".stat_val");var statDiffElem=jQuery("#main-"+id+"-val-"+p).parent().find(".stat_diff");var statValElemCard=jQuery(".stat-val[data-stat='"+id+"']");var statDiffElemCard=jQuery(".main-stat-diff[data-stat='"+id+"']");totalMainStats[p]=jQuery.isNumeric(stat)?totalMainStats[p]+stat:totalMainStats[p]+0;var dividerBackgroundClass=statColourDivider(stat);jQuery("#main-"+id+"-val-"+p).next("#pb").find("div").css({width:""+stat+"%"}).removeAttr("class").addClass(dividerBackgroundClass)}else{p=0;totalChemStyleStats=totalChemStyleStats+diffStat;statValElem=jQuery("#sub-"+id+"-val-"+p).children(".stat_val");statDiffElem=jQuery("#sub-"+id+"-val-"+p).parent().find(".stat_diff");totalSubStats[p]=jQuery.isNumeric(stat)?totalSubStats[p]+stat:totalSubStats[p]+0}if(stat==null){stat="-";diffStatHtml="-"}statValElem.html(Math.round(stat));statDiffElem.html(diffStatHtml);if(typeof statValElemCard!=="undefined"){statValElemCard.html(stat)}if(typeof statDiffElemCard!=="undefined"){statDiffElemCard.html(diffStatHtml).show()}statDiffElem.css("color",diffStatStyleColor);pStatsObj[p][id]={stat:stat}});$("#chem_style_dd"+p).removeClass("open");var chemTotalColor="#212121";chemStyleTotalSign="";if(totalChemStyleStats>0){chemTotalColor="#43a047";var chemStyleTotalSign="+"}if(totalChemStyleStats<1){chemTotalColor="#e53935"}if(totalChemStyleStats==0){chemTotalColor="#212121"}$("#chemstyle-total").html(chemStyleTotalSign+""+Math.round(totalChemStyleStats)).css("color",chemTotalColor)});if(p===0){sumFullStats=calcMentalSkillTotalStats(playerStats[p]);sumFullStats["base_stats"]=sumFullStats["base_stats"]||0;sumFullStats["in_game_stats"]=sumFullStats["in_game_stats"]||0;sumFullStats["skill_stats"]=sumFullStats["skill_stats"]||0;sumFullStats["mental_stats"]=sumFullStats["mental_stats"]||0;sumFullStats["physical_stats"]=sumFullStats["physical_stats"]||0;gg1.refresh(sumFullStats["physical_stats"],null,1);gg2.refresh(sumFullStats["mental_stats"],null,1);gg3.refresh(sumFullStats["skill_stats"],null,1);gg4.refresh(sumFullStats["base_stats"],null,1);gg5.refresh(sumFullStats["in_game_stats"],null,1);pRpp[p]=getPlayerRatingPerPosition(pStatsObj[p]);changeRppValues(pRpp[p],p);$(".card-n"+p).animate({opacity:"0.3"}).animate({opacity:"1"})}}function changeStats(p){totalSubStats[p]=0;totalMainStats[p]=0;var sumFullStats={};var mainP=0;jQuery.each(playerStats[p],function(mainKey,mainVal){jQuery.each(mainVal,function(key,val){var stat=val.hasOwnProperty("totalStat")&&!isNaN(val.totalStat)?val.totalStat:val.value;var mainPStat=playerStats[mainP][mainKey][key].hasOwnProperty("totalStat")&&mainP!==p?playerStats[mainP][mainKey][key].totalStat:playerStats[mainP][mainKey][key].value;var diffStat=stat-mainPStat;var diffStatHtml="";var diffStatStyleColor="";var cardDiffColor="";if(diffStat>0){diffStatHtml="+"+Math.round(diffStat);diffStatStyleColor=greenRedDiff(window.cardRareType,year)["green"];cardDiffColor=greenRedDiff(window.cardRareType,year)["green"]}else if(diffStat<0){diffStatHtml=Math.round(diffStat);diffStatStyleColor="#dd2c00";diffStatStyleColor=greenRedDiff(window.cardRareType,year)["red"];cardDiffColor=greenRedDiff(window.cardRareType,year)["red"]}else{cardDiffColor="#fff"}var id=val.id;if(val.type==="main"){var statValElem=jQuery("#main-"+id+"-val-"+mainP).children(".stat_val");var statDiffElem=jQuery("#main-"+id+"-val-"+mainP).parent().find(".stat_diff_cards");var statDiffElemCard=jQuery(".main-stat-diff[data-stat='"+id+"']");var statValElemCard=jQuery(".stat-val[data-stat='"+id+"']");totalMainStats[p]=jQuery.isNumeric(stat)?totalMainStats[p]+stat:totalMainStats[p]+0;var dividerBackgroundClass=statColourDivider(stat);jQuery("#main-"+id+"-val-"+p).next("#pb").find("div").css({width:""+stat+"%"}).removeAttr("class").addClass(dividerBackgroundClass)}else{statValElem=jQuery("#sub-"+id+"-val-"+mainP).children(".stat_val");statDiffElem=jQuery("#sub-"+id+"-val-"+mainP).parent().find(".stat_diff_cards");totalSubStats[p]=jQuery.isNumeric(stat)?totalSubStats[p]+stat:totalSubStats[p]+0}if(stat==null){stat="-";diffStatHtml="-";isStat=false}else{isStat=true}statValElem.html(Math.round(stat));statDiffElem.html(diffStatHtml);if(typeof statValElemCard!=="undefined"){statValElemCard.html(Math.round(stat))}if(typeof statDiffElemCard!=="undefined"){statDiffElemCard.html(diffStatHtml).show()}statDiffElem.css("color",diffStatStyleColor);pStatsObj[p][id]={stat:stat}});var chemTotalColor="#212121";chemStyleTotalSign="";if(totalChemStyleStats>0){chemTotalColor="#43a047";var chemStyleTotalSign="+"}if(totalChemStyleStats<1){chemTotalColor="#e53935"}if(totalChemStyleStats==0){chemTotalColor="#212121"}$("#chemstyle-total").html(chemStyleTotalSign+""+Math.round(totalChemStyleStats)).css("color",chemTotalColor);$("#chem_style_dd"+p).removeClass("open")});sumFullStats=calcMentalSkillTotalStats(playerStats[p]);sumFullStats["base_stats"]=sumFullStats["base_stats"]||0;sumFullStats["in_game_stats"]=sumFullStats["in_game_stats"]||0;sumFullStats["skill_stats"]=sumFullStats["skill_stats"]||0;sumFullStats["mental_stats"]=sumFullStats["mental_stats"]||0;sumFullStats["physical_stats"]=sumFullStats["physical_stats"]||0;$("#total-bs").html(sumFullStats["base_stats"]);$("#total-igs").html(sumFullStats["in_game_stats"]);$("#skill-total").html(sumFullStats["skill_stats"]);$("#mental-total").html(sumFullStats["mental_stats"]);gg1.refresh(sumFullStats["physical_stats"],null,1);gg2.refresh(sumFullStats["mental_stats"],null,1);gg3.refresh(sumFullStats["skill_stats"],null,1);gg4.refresh(sumFullStats["base_stats"],null,1);gg5.refresh(sumFullStats["in_game_stats"],null,1);$("#stat_val_total_ts_"+p).html(totalMainStats[p]).effect("highlight",{},1500);$("#stat_val_total_igs_"+p).html(totalSubStats[p]).effect("highlight",{},1500);pRpp[p]=getPlayerRatingPerPosition(pStatsObj[p]);changeRppValues(pRpp[p],p);$(".card-n"+p).animate({opacity:"0.3"}).animate({opacity:"1"})}function setStatsColor(){jQuery.each(allPlayerStats,function(key,astat){var stat=astat.toLowerCase();var maxKeys={};jQuery.each(totalP,function(key2,p){if(pStatsObj[p].hasOwnProperty(stat)){currentStat=parseInt(pStatsObj[p][stat]["stat"]);statElem=jQuery("."+stat+"-val-"+p);statElem.removeClass("stat_text_red stat_text_orange stat_text_yellow stat_text_green stat_text_dark_green");if(currentStat<51){statElem.addClass("stat_text_red")}else if(currentStat<71&&currentStat>=51){statElem.addClass("stat_text_orange")}else if(currentStat<81&&currentStat>=71){statElem.addClass("stat_text_green")}else if(currentStat>=81){statElem.addClass("stat_text_dark_green")}}})})}function changeRppValues(data,p){var mainP=0;rppElem=jQuery(".rpp_field-"+mainP);jQuery.each(data,function(key,value){var posHolder=rppElem.children(".rpp_field_pos_"+key+"");var bgClass=getFutBgClassColor(value);posHolder.attr("class","").addClass("rpp_field_pos rpp_field_pos_"+key+" "+bgClass+"");posHolder.attr("data-original-title",Math.round(value*10)/10);posHolder.find(".rpp_rating").text(Math.round(value))})}$(".select-styles").css("display","inline-block");function modUrl(reload){return false;var url=base_url+"/"+url_year+"/"+data_url;var players="";var chems="";var pchems="";var schems="";var modifiedParams=false;jQuery.each(pModified,function(k,v){if(v){modifiedParams=true}});key=0;players="/";if(modifiedParams){if(chems===""){chems="chem="}cValue=pModified[key]&&typeof pChems[key]!="undefined"?pChems[key]:"null";chems=chems+cValue+",";if(pchems===""){pchems="pchem="}pValue=pModified[key]&&typeof pPChems[key]!="undefined"?pPChems[key]:"null";pchems=pchems+pValue+",";if(schems===""){schems="schem="}sValue=pModified[key]&&typeof pSChems[key]!="undefined"?pSChems[key]:"null";schems=schems+sValue+","}if(players!==""){url=url+players;if(chems!==""){url=url+"?"+chems.replace(/[,]$/,"");if(pchems!==""){url=url+"&"+pchems.replace(/[,]$/,"")}if(schems!==""){url=url+"&"+schems.replace(/[,]$/,"")}}}$("#share_compare_url").html(domainAndProtocol+url);if(reload){window.location.href=url}else{window.history.replaceState({},null,url)}}$(".tab_label").click(function(){var content=$(this).attr("data-content");$(".tab_label").each(function(){$(this).removeClass("active")});$(this).addClass("active");$(".content_data").each(function(){$(this).hide()});$("."+content+"").each(function(){$(this).show()})});window.boostedPlayerKey=0;window.boostedPlayer=false;window.thisB="";$("#scream-boost").click(function(){window.thisB=this;var status=$(this).attr("data-status");$(this).toggleClass("active");var pID=jQuery(this).data("stats-key");pID=parseInt(pID);window.boostedPlayerKey=pID;var boostRating=$(this).data("rating");if(status=="off"){window.boostedPlayer=true;$("#stats_box").addClass("scream-stats-bg");$(this).attr("data-status","on");$(this).html('<span><i class="icon-arrow-up16"></i> Scream Boosts on</span>');$("#Player-card > .pcdisplay-rat").html(boostRating);$(".main-stat-diff").each(function(i,obj){$(this).hide()});$("#Player-card > .pcdisplay-picture > #player_pic").addClass("scream-shadow");$(this).removeClass("active-off");jQuery(".stat_diff_cards").each(function(i,obj){jQuery(this).show()});changeStats(pID)}else{window.boostedPlayer=false;$("#stats_box").removeClass("scream-stats-bg");$(this).attr("data-status","off");$(this).addClass("active-off");$(this).html('<span><i class="icon-arrow-up16"></i> Scream Boosts off</span>');$("#Player-card > .pcdisplay-rat").html(window.originalData["rating"]);$("#Player-card > .pcdisplay-picture > #player_pic").removeClass("scream-shadow");$(".main-stat-diff").each(function(i,obj){$(this).hide()});jQuery(".stat_diff_cards").each(function(i,obj){jQuery(this).hide()});changeStats(0)}});function restoreBoost(){var boostRating=$(window.thisB).data("rating");pID=window.boostedPlayerKey;$("#stats_box").addClass("scream-stats-bg");$(window.thisB).attr("data-status","on");$(window.thisB).html('<span><i class="icon-arrow-up16"></i> Scream Boosts on</span>');$("#Player-card > .pcdisplay-rat").html(boostRating);$(".main-stat-diff").each(function(i,obj){$(this).hide()});$("#Player-card > .pcdisplay-picture > #player_pic").addClass("scream-shadow");$(window.thisB).removeClass("active-off");jQuery(".stat_diff_cards").each(function(i,obj){jQuery(this).show()});changeStats(pID)}if(window.year>19&&window.originalData["position"]!="GK"){playerChemPoll=JSON.parse($("#chemStylePoll").html().trim());playerChemPollTotalVotes=parseInt($("#chemStylePoll").data("total-vote"));var chemBars=Highcharts.chart("container2",{chart:{type:"column"},title:{text:"What Chemistry Style is the best for "+window.originalData["playerName"]+'?  <span style="color: #f21d51; font-weight: bold;"> ('+playerChemPollTotalVotes+" votes)</span> "},subtitle:{text:'<i class="icon-stats-bars2"></i> Click the columns in order to vote',useHTML:true},xAxis:{type:"category"},yAxis:{title:{text:"Community percent usage"},max:100,min:0},credits:{enabled:false},legend:{enabled:false},plotOptions:{column:{borderRadius:5},series:{borderWidth:0,dataLabels:{enabled:true,format:"{point.y:.1f}%"}}},tooltip:{headerFormat:'<span style="font-size:11px">{series.name}</span><br>',pointFormat:'<span style="color:{point.color}">{point.name}</span>: <b>{point.y:.2f}%</b> of '+playerChemPollTotalVotes+" votes<br/>"},series:[{name:"Chemistry Style",color:"#f21d51",credits:{enabled:false},shadow:{width:10,color:"rgba(242,29,81,0.15)"},point:{events:{click:function(){playerChemistryStyleVote(this.chem_id)}}},data:playerChemPoll}]}).showLoading(createChemStyleSpinnerHtml());setTimeout(function(){$(".highcharts-loading").fadeOut()},1e3)}function playerChemistryStyleVote(chem_id){var player_id=parseInt($("#page-data").attr("data-player-id"));data={};data["csrf_name"]=jQuery("meta[name=general_csrf-name]").attr("content");data["csrf_value"]=jQuery("meta[name=general_csrf-value]").attr("content");data["id"]=player_id;data["chem_id"]=chem_id;data["year"]=window.year;$.ajax({type:"POST",url:"/user/"+window.year+"/playerChemistryStyleVote",cache:false,data:data,statusCode:{401:function(data){toastr["error"]("You have to login in order to vote")},500:function(data){toastr["error"]("Something went wrong")}},success:function(data){switch(data.data){case true:toastr["success"]("We've received your vote");break;case"alreadyVoted":toastr["warning"]("You already voted");break}},error:function(data){toastr["error"]("Something went wrong")}})}});function createChemStyleSpinnerHtml(){$spinner='<div class="col-12 text-center"><div class="preloader-wrapper small active crazy m-5 " id="comments-loader">\n'+'                                    <div  class="spinner-layer spinner-yellow-only spinner-pink-only">\n'+'                                        <div class="circle-clipper left">\n'+'                                            <div class="circle"></div>\n'+"                                        </div>\n"+'                                        <div class="gap-patch">\n'+'                                            <div class="circle"></div>\n'+"                                        </div>\n"+'                                        <div class="circle-clipper right">\n'+'                                            <div class="circle"></div>\n'+"                                        </div>\n"+"                                    </div>\n"+"                                </div></div>";return $spinner}