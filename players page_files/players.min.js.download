jQuery(document).ready(function(){window.path=jQuery(".url_parts").attr("data-url-3");window.year=jQuery(".url_parts").attr("data-year");var mobileActive=$("#players-page-info").attr("data-mobile");filtersType=$("#players-page-info").data("filters-type");if(filtersType==="frontend"&&window.year>20){doAjaxRequestFilters()}function testvar(){var x=4}function breakUrl(urlpart){var newURl="";var urlArrKeys=[];urlpart=urlpart.replace(/,,,/g,"&");urlpart=urlpart.split("&");if(urlpart.length<1){urlpart=""}else{$.each(urlpart,function(index,value){valArr=value.split("=");urlArrKeys.push(valArr[0]);if(value!=""&&jQuery.inArray(valArr[0],urlArrKeys)!=-1){newURl+="&"+value}})}return newURl}$(".filters-holder").on("click","#exclude-filter-btn",function(){var filterE={};if($(".exclude-nations").val()!=null){filterE["eNations"]=$(".exclude-nations").val()}if($("#excludeUnt").is(":checked")){filterE["eUnt"]=1}if($(".exclude-leagues").val()!=null){filterE["eLeagues"]=$(".exclude-leagues").val()}if($(".exclude-clubs").val()!=null){filterE["eClubs"]=$(".exclude-clubs").val()}if(typeof filterE==="undefined"||filterE.length===0){return false}var urlpart=jQuery(".url_parts").attr("data-url-path");var urlpart2=jQuery(".url_parts").attr("data-url-2");var newURl=breakUrl(urlpart2);var fullUrl=urlpart+"?page=1";$.each(filterE,function(key,value){fullUrl+="&"+key+"="+filterE[key]+newURl});var fullUrlSplit=fullUrl.split("&");var urlArrKeysCheck=[];$.each(fullUrlSplit,function(index,value){var valArr=value.split("=");if(value!=""&&jQuery.inArray(valArr[0],urlArrKeysCheck)!==-1){fullUrl=fullUrl.replace(value,"");fullUrl=fullUrl.replace("&&","&")}urlArrKeysCheck.push(valArr[0])});window.location=fullUrl});if(filtersType==="backend"){initSelectExclude()}function initSelectExclude(){$(".exclude-clubs").select2({multiple:true,maximumSelectionLength:3,ajax:{url:"/clnSearch/club",dataType:"json",delay:250,allowClear:true,width:"resolve",data:function(params){return{term:params.term}},processResults:function(data,page){var myResults;myResults=[];$.each(data,function(index,item){myResults.push({id:item.id,text:item.club_name})});return{results:myResults}},cache:true},escapeMarkup:function(markup){return markup},minimumInputLength:1,templateResult:formatRepoClub,templateSelection:formatRepoSelectionClub});$(".exclude-nations").select2({multiple:true,maximumSelectionLength:3,ajax:{url:"/clnSearch/nation",dataType:"json",delay:250,allowClear:true,width:"resolve",data:function(params){return{term:params.term}},processResults:function(data,page){var myResults;myResults=[];$.each(data,function(index,item){myResults.push({id:item.id,text:item.country_name})});return{results:myResults}},cache:true},escapeMarkup:function(markup){return markup},minimumInputLength:1,templateResult:formatRepo,templateSelection:formatRepoSelection});$(".exclude-leagues").select2({multiple:true,maximumSelectionLength:3,ajax:{url:"/clnSearch/league",dataType:"json",delay:250,allowClear:true,width:"resolve",data:function(params){return{term:params.term}},processResults:function(data,page){var myResults;myResults=[];$.each(data,function(index,item){myResults.push({id:item.id,text:item.league_name})});return{results:myResults}},cache:true},escapeMarkup:function(markup){return markup},minimumInputLength:1,templateResult:formatRepoLeague,templateSelection:formatRepoSelectionLeague})}function formatRepo(repo){if(repo.loading)return repo.text;var markup='<div class="row"><div class="avatar d-inline mr-2">'+'<img src="/content/fifa'+year+"/img/nation/"+repo.id+'.png" style="width: 15px;" />'+"</div>"+'<div class="info">'+'<div class="d-inline">'+repo.text+"</div>";if(repo.description){markup+="<div>"+repo.description+"</div>"}markup+="</div></div></div>";return markup}function formatRepoSelection(repo){return repo.country_name||repo.text}function formatRepoLeague(repo){if(repo.loading)return repo.text;var markup='<div class="row"><div class="avatar d-inline mr-2">'+'<img src="/content/fifa'+year+"/img/league/"+repo.id+'.png" style="width: 15px;" />'+"</div>"+'<div class="info">'+'<div class="d-inline">'+repo.text+"</div>";if(repo.description){markup+="<div>"+repo.description+"</div>"}markup+="</div></div></div>";return markup}function formatRepoSelectionLeague(repo){return repo.league_name||repo.text}function formatRepoClub(repo){if(repo.loading)return repo.text;var markup='<div class="row"><div class="avatar d-inline mr-2">'+'<img src="/content/fifa'+year+"/img/clubs/"+repo.id+'.png" style="width: 15px;" />'+"</div>"+'<div class="info">'+'<div class="d-inline">'+repo.text+"</div>";if(repo.description){markup+="<div>"+repo.description+"</div>"}markup+="</div></div></div>";return markup}function formatRepoSelectionClub(repo){return repo.club_name||repo.text}(function($){$.fn.getStyleObject=function(){var dom=this.get(0);var style;var returns={};if(window.getComputedStyle){var camelize=function(a,b){return b.toUpperCase()};style=window.getComputedStyle(dom,null);for(var i=0,l=style.length;i<l;i++){var prop=style[i];var camel=prop.replace(/\-([a-z])/g,camelize);var val=style.getPropertyValue(prop);returns[camel]=val}return returns}if(style=dom.currentStyle){for(var prop in style){returns[prop]=style[prop]}return returns}return this.css()}})(jQuery);(function($){showCards=$("#players-page-info").data("cards");var tableTop,tableBottom,ClnH;$.fn.FixedHeader=function(){if(showCards==="0"){tableTop=this.offset().top,tableBottom=this.outerHeight()+tableTop;this.after('<table id="fixH"></table>');ClnH=$("#fixH").html(this.find("thead").clone());ClnH.css({position:"fixed",top:"55px",zIndex:"60",display:"none","border-collapse":this.css("border-collapse"),"border-spacing":this.css("border-spacing"),"margin-left":this.css("margin-left"),width:this.css("width")});$.each(this.find("thead>tr>th"),function(ind,val){$(ClnH.find("tr>th")[ind]).css($(val).getStyleObject())});return ClnH}};if(showCards==="0"){$.fn.moveScroll=function(){var offset=$(window).scrollTop();if(offset>tableTop&&offset<tableBottom){if(ClnH.is(":hidden"))ClnH.show();$("#fixH").css("margin-left","-"+$(window).scrollLeft()+"px")}else if(offset<tableTop||offset>tableBottom){if(!ClnH.is(":hidden"))ClnH.hide()}}}})(jQuery);if(mobileActive==0){var $myfixedHeader=$("#repTb").FixedHeader();if(showCards==="0"){$(window).scroll($myfixedHeader.moveScroll)}}jQuery("img.lazy").lazyload({placeholder:""+window.cdn_url+"/design/img/blank_badge.png"});jQuery(".versions-dd").hover(function(){jQuery("img.single_dd").lazyload()});jQuery(".sub_menu_advanced").hover(function(){jQuery(".player_silhouettes").lazyload({placeholder:""+window.cdn_url+"/design/img/blank_badge.png"})});$(".tooltiper").tooltipster({theme:"tooltipster-shadow",maxWidth:200});var xyz=0;$(".tooltiper_tands").tooltipster({theme:"tooltipster-shadow",maxWidth:200,side:["left","top"]});$(".dd_checkbox").iCheck({checkboxClass:"iradio_futurico",radioClass:"iradio_polaris",increaseArea:"20%"}).on("ifChecked",function(event){var input=$(this);input.attr("checked",!input.attr("checked"))});jQuery(".country_sub").hover(function(){$(this).find("img.lazy.cln").each(function(){if(!jQuery(this).hasClass("faded")){$(this).fadeOut(function(){jQuery(this).attr("src",jQuery(this).attr("data-original")).fadeIn();jQuery(this).removeAttr("data-original");jQuery(this).addClass("faded")})}})});jQuery(".leagues_sub").hover(function(){$(this).find("img.lazy.cln_league").each(function(){if(!jQuery(this).hasClass("faded")){$(this).fadeOut(function(){jQuery(this).attr("src",jQuery(this).attr("data-original")).fadeIn();jQuery(this).removeAttr("data-original");jQuery(this).addClass("faded")})}})});jQuery(".accordion").click(function(){$(this).find("img.lazy.cln_club").each(function(){if(!jQuery(this).hasClass("faded")){$(this).fadeOut(function(){jQuery(this).attr("src",jQuery(this).attr("data-original")).fadeIn();jQuery(this).removeAttr("data-original");jQuery(this).addClass("faded")})}})});var legends_status=jQuery("#legend_status").attr("data-status");jQuery("#xbox_pl_icon").hover(function(){if(legends_status=="off"){jQuery("img#xbox_ic").attr("src",""+window.cdn_url+"/design/img/logos/xbox_pl_icon_active.png")}},function(){if(legends_status=="off"){jQuery("img#xbox_ic").attr("src",""+window.cdn_url+"/design/img/logos/xbox_pl_icon.png")}});$("#query").click(function(){jQuery(".query_content").toggleClass("hide")});$(".filters-holder").on("keyup",".attr_input",function(e){var max1=parseInt(jQuery(this).attr("max"));var min1=parseInt(jQuery(this).attr("min"));if(jQuery(this).val()>max1){jQuery(this).val(max1)}else if(jQuery(this).val()<min1){jQuery(this).val("")}if(isNaN(jQuery(this).val())){jQuery(this).val("")}var newQuery="";var input_type=jQuery(this).attr("data-type");if(input_type=="min"){var min_val=jQuery(this).val();if(min_val>0&&min_val<100){jQuery(this).closest("div").attr("data-min",min_val)}if(!min_val){jQuery(this).closest("div").attr("data-min",0)}}else if(input_type=="max"){var max_val=jQuery(this).val();if(max_val>0&&max_val<100){jQuery(this).closest("div").attr("data-max",max_val)}if(!max_val){jQuery(this).closest("div").attr("data-max",0)}}$(".attr_input_span").each(function(){var attr_type=jQuery(this).attr("data-type");var minVal=jQuery(this).attr("data-min");var maxVal=jQuery(this).attr("data-max");if(minVal>0&&minVal<100||maxVal>0&&maxVal<100){newQuery+="&"+attr_type+"="+minVal+","+maxVal}});var urlDiv=jQuery(".url_parts");var urlParm=urlDiv.attr("data-url");var fullURL=urlParm+newQuery;var yearURI=urlDiv.attr("data-year");if(fullURL.indexOf("page")==-1){fullURL="/"+yearURI+"/players?page=1"+newQuery}jQuery("#filter_stats").attr("href",fullURL)});$(".filters-holder").on("click","#clear_filter_stats",function(e){$(".attr_input_span").each(function(){jQuery(this).attr("data-min",0);jQuery(this).attr("data-max",0);jQuery(this).val("")});var newQuery=""});$(".filters-holder").on("keyup",".filter_input_cln",function(e){type=$(this).attr("id");cln(type)});$(".filters-holder").on("click",".tands_li",function(){var chbx=$(this).find(".iradio_futurico");chbx.toggleClass("checked");var input=$(this).find("input");input.attr("checked",!input.attr("checked"))});$(".filters-holder").on("click",".custom_price_filter",function(){var inputId=$(this).attr("data-id");var type=$(this).attr("data-url");range_filter_new(inputId,type)});$(".filters-holder").on("click",".custom_rating_filter",function(){var inputId=$(this).attr("data-id");var type=$(this).attr("data-url");range_filter_new(inputId,type)});var filter={};function range_filter_new(key,type){if(parseInt(jQuery("#MinRating").val())<=39||parseInt(jQuery("#MinRating").val())>=100){alert("Min value between 40 to 99")}else if(parseInt(jQuery("#MaxRating").val())<=39||parseInt(jQuery("#MaxRating").val())>=100){alert("Max value between 40 to 99")}else if(parseInt(jQuery("#MinPS_Price").val())<=199||parseInt(jQuery("#MinPS_Price").val())>=15000001){alert("Min value between 200 to 15,000,000")}else if(parseInt(jQuery("#MaxPS_Price").val())<=199||parseInt(jQuery("#MaxPS_Price").val())>=15000001){alert("Max value between 200 to 15,000,000")}else if(parseInt(jQuery("#MinXBOX_Price").val())<=199||parseInt(jQuery("#MinXBOX_Price").val())>=15000001){alert("Min value between 200 to 15,000,000")}else if(parseInt(jQuery("#MaxXBOX_Price").val())<=199||parseInt(jQuery("#MaxXBOX_Price").val())>=15000001){alert("Max value between 200 to 15,000,000")}else if(parseInt(jQuery("#MinPC_Price").val())<=199||parseInt(jQuery("#MinPC_Price").val())>=15000001){alert("Min value between 200 to 15,000,000")}else if(parseInt(jQuery("#MaxPC_Price").val())<=199||parseInt(jQuery("#MaxPC_Price").val())>=15000001){alert("Max value between 200 to 15,000,000")}else{var rating_min=jQuery("#Min"+key).val();if(rating_min.length==0){rating_min=0}var rating_max=jQuery("#Max"+key).val();if(rating_max.length==0){rating_max=15e6}if(jQuery("#MinRating").val().length==0&&jQuery("#MaxRating").val().length>0){rating_min=30}if(jQuery("#MinRating").val().length>0&&jQuery("#MaxRating").val().length==0){rating_max=99}filter[key]=rating_min+"-"+rating_max;var urlpart=jQuery(".url_parts").attr("data-url-path");var urlpart2=jQuery(".url_parts").attr("data-url-2");var newURl=breakUrl(urlpart2);var multi_pos=filter["Position"];var fullUrl=urlpart+"?page=1&"+type+"="+filter[key]+newURl;var fullUrlSplit=fullUrl.split("&");var urlArrKeysCheck=[];$.each(fullUrlSplit,function(index,value){var valArr=value.split("=");if(value!=""&&jQuery.inArray(valArr[0],urlArrKeysCheck)!==-1){fullUrl=fullUrl.replace(value,"");fullUrl=fullUrl.replace("&&","&")}urlArrKeysCheck.push(valArr[0])});window.location=fullUrl}}$(".filters-holder").on("click",".static-filter",function(e){var urlpart=jQuery(".url_parts").attr("data-url-path");var urlpart2=jQuery(".url_parts").attr("data-url-2");var newURl=breakUrl(urlpart2);type=$(this).data("filter-type");value=$(this).data("value");var fullUrl=urlpart+"?page=1&"+type+"="+value+newURl;var fullUrlSplit=fullUrl.split("&");var urlArrKeysCheck=[];$.each(fullUrlSplit,function(index,value){var valArr=value.split("=");if(value!=""&&jQuery.inArray(valArr[0],urlArrKeysCheck)!==-1){fullUrl=fullUrl.replace(value,"");fullUrl=fullUrl.replace("&&","&")}urlArrKeysCheck.push(valArr[0])});window.location=fullUrl});var attemptsFilters;function doAjaxRequestFilters(){attemptsFilters=0;doAjaxRequestFiltersLoop()}function doAjaxRequestFiltersLoop(){attemptsFilters+=1;if(attemptsFilters>3){console.log("Something went wrong, please try to refresh the page.");return}var url="/"+year+"/sFilters";var dataString={};mobile=$("#site-user-info").data("mobile");dataString["mobile"]=mobile;userPlatform=getCookie("platform");if(!userPlatform.length)userPlatform="ps4";dataString["platform"]=userPlatform;jQuery.ajax({url:url,type:"GET",data:dataString,cache:"",dataType:"html",success:function(data){$(".filters-holder").hide().html(data).fadeIn();jQuery(".versions-dd").hover(function(){jQuery("img.single_dd").lazyload()});jQuery("img.lazy").lazyload({placeholder:""+window.cdn_url+"/design/img/blank_badge.png"});jQuery(".sub_menu_advanced").hover(function(){jQuery(".player_silhouettes").lazyload({placeholder:""+window.cdn_url+"/design/img/blank_badge.png"})});initDropdown();initSelectExclude()},error:function(error){}})}function initDropdown(){$(".dropdown").on("mouseenter",".dropdown-item",function(){if(!$(this).parents("li").hasClass("dropdown-submenu")){$(".dropdown-submenu .show").removeClass("show")}});$(".menu_bar").on("mouseenter",".dropdown-menu a.dropdown-toggle",function(){if(!$(this).next().hasClass("show")){$(this).parents(".dropdown-menu").first().find(".show").removeClass("show")}var $subMenu=$(this).next(".dropdown-menu");$subMenu.toggleClass("show");$(this).parents("li.nav-item.dropdown.show").on("hidden.bs.dropdown",function(e){$(".dropdown-submenu .show").removeClass("show")});$("p").hover(function(){$(this).css("background-color","yellow")},function(){$(this).css("background-color","pink")});return false})}$(".filters-holder").on("click",".search-filter-icon",function(){$(".search-filter-mobile").slideToggle()});$(".search-filter-mobile").on("keypress","#players_search",function(e){if(e.which==13){var urlpart=jQuery(".url_parts").attr("data-url-path");window.location=urlpart+"?page=1&search="+jQuery(this).val()}});$(".filters-holder").on("keypress","#players_search",function(e){if(e.which==13){var urlpart=jQuery(".url_parts").attr("data-url-path");window.location=urlpart+"?page=1&search="+jQuery(this).val()}})});